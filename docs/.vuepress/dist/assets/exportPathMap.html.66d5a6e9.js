import{_ as n,r as s,o,c as p,b as e,d as a,e as c,a as r}from"./app.1ad2624e.js";const i={},d=e("h1",{id:"exportpathmap",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#exportpathmap","aria-hidden":"true"},"#"),a(" exportPathMap")],-1),l=e("blockquote",null,[e("p",null,[a("This feature is exclusive to"),e("code",null,"next export"),a(". Please refer to"),e("a",{href:"/docs/guide/advanced-features/static-html-export"},"Static HTML export"),a("if you want to learn more about it.")])],-1),u={class:"custom-container details"},h=e("summary",null,"示例",-1),k={href:"https://github.com/vercel/next.js/tree/canary/examples/with-static-export",target:"_blank",rel:"noopener noreferrer"},g=r(`<p><code>exportPathMap</code>allows you to specify a mapping of request paths to page destinations, to be used during export. Paths defined in<code>exportPathMap</code>will also be available when using<a href="/docs/guide/api-reference/cli#development"><code>next dev</code></a>.</p><p>Let&#39;s start with an example, to create a custom<code>exportPathMap</code>for an app with the following pages:</p><ul><li><code>pages/index.js</code>- <code>pages/about.js</code>- <code>pages/post.js</code></li></ul><p>Open<code>next.config.js</code>and add the following<code>exportPathMap</code>config:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">exportPathMap</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>
    <span class="token parameter">defaultPathMap<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> dev<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> outDir<span class="token punctuation">,</span> distDir<span class="token punctuation">,</span> buildId <span class="token punctuation">}</span></span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/about&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token string">&#39;/about&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/p/hello-nextjs&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token string">&#39;/post&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;hello-nextjs&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/p/learn-nextjs&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token string">&#39;/post&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;learn-nextjs&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/p/deploy-nextjs&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token string">&#39;/post&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;deploy-nextjs&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote><p>Note: the<code>query</code>field in<code>exportPathMap</code>cannot be used with<a href="/docs/guide/advanced-features/automatic-static-optimization">automatically statically optimized pages</a>or<a href="/docs/guide/basic-features/data-fetching/get-static-props"><code>getStaticProps</code>pages</a>as they are rendered to HTML files at build-time and additional query information cannot be provided during<code>next export</code>.</p></blockquote><p>The pages will then be exported as HTML files, for example,<code>/about</code>will become<code>/about.html</code>.</p><p><code>exportPathMap</code>is an<code>async</code>function that receives 2 arguments: the first one is<code>defaultPathMap</code>, which is the default map used by Next.js. The second argument is an object with:</p><ul><li><code>dev</code>-<code>true</code>when<code>exportPathMap</code>is being called in development.<code>false</code>when running<code>next export</code>. In development<code>exportPathMap</code>is used to define routes.- <code>dir</code>- Absolute path to the project directory- <code>outDir</code>- Absolute path to the<code>out/</code>directory (<a href="#customizing-the-output-directory">configurable with<code>-o</code></a>). When<code>dev</code>is<code>true</code>the value of<code>outDir</code>will be<code>null</code>.- <code>distDir</code>- Absolute path to the<code>.next/</code>directory (configurable with the<a href="/docs/guide/api-reference/next.config.js/setting-a-custom-build-directory"><code>distDir</code></a>config)- <code>buildId</code>- The generated build id</li></ul><p>The returned object is a map of pages where the<code>key</code>is the<code>pathname</code>and the<code>value</code>is an object that accepts the following fields:</p><ul><li><code>page</code>:<code>String</code>- the page inside the<code>pages</code>directory to render- <code>query</code>:<code>Object</code>- the<code>query</code>object passed to<code>getInitialProps</code>when prerendering. Defaults to<code>{}</code></li></ul><blockquote><p>The exported<code>pathname</code>can also be a filename (for example,<code>/readme.md</code>), but you may need to set the<code>Content-Type</code>header to<code>text/html</code>when serving its content if it is different than<code>.html</code>.</p></blockquote><h2 id="adding-a-trailing-slash" tabindex="-1"><a class="header-anchor" href="#adding-a-trailing-slash" aria-hidden="true">#</a> Adding a trailing slash</h2><p>It is possible to configure Next.js to export pages as<code>index.html</code>files and require trailing slashes,<code>/about</code>becomes<code>/about/index.html</code>and is routable via<code>/about/</code>. This was the default behavior prior to Next.js 9.</p><p>To switch back and add a trailing slash, open<code>next.config.js</code>and enable the<code>trailingSlash</code>config:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">trailingSlash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="customizing-the-output-directory" tabindex="-1"><a class="header-anchor" href="#customizing-the-output-directory" aria-hidden="true">#</a> Customizing the output directory</h2><p><a href="/docs/guide/advanced-features/static-html-export#how-to-use-it"><code>next export</code></a>will use<code>out</code>as the default output directory, you can customize this using the<code>-o</code>argument, like so:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>next <span class="token builtin class-name">export</span> <span class="token parameter variable">-o</span> outdir

</code></pre></div><blockquote><p><strong>Warning</strong>: Using<code>exportPathMap</code>for defining routes with any<code>getStaticPaths</code>powered page is now ignored and gets overridden. We recommend not to use them together.</p></blockquote><h2 id="related" tabindex="-1"><a class="header-anchor" href="#related" aria-hidden="true">#</a> Related</h2>`,21);function f(x,y){const t=s("ExternalLinkIcon");return o(),p("div",null,[d,l,e("details",u,[h,e("ul",null,[e("li",null,[e("a",k,[a("Static Export"),c(t)])])])]),g])}const b=n(i,[["render",f],["__file","exportPathMap.html.vue"]]);export{b as default};
