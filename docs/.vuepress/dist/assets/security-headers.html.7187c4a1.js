import{_ as o,r,o as p,c,b as s,d as e,e as a,a as t}from"./app.1ad2624e.js";const i={},l=t(`<h1 id="security-headers" tabindex="-1"><a class="header-anchor" href="#security-headers" aria-hidden="true">#</a> Security Headers</h1><p>To improve the security of your application, you can use<a href="/docs/guide/api-reference/next.config.js/headers"><code>headers</code></a>in<code>next.config.js</code>to apply HTTP response headers to all routes in your application.</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// next.config.js</span>

<span class="token comment">// You can choose which headers to add to the list</span>
<span class="token comment">// after learning more below.</span>
<span class="token keyword">const</span> securityHeaders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// Apply these headers to all routes in your application.</span>
        <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">&#39;/:path*&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> securityHeaders<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="options" tabindex="-1"><a class="header-anchor" href="#options" aria-hidden="true">#</a> Options</h2><h3 id="x-dns-prefetch-control" tabindex="-1"><a class="header-anchor" href="#x-dns-prefetch-control" aria-hidden="true">#</a> X-DNS-Prefetch-Control</h3>`,5),d={href:"https://developer.mozilla.org/en-US/docs/Glossary/DNS",target:"_blank",rel:"noopener noreferrer"},u=t(`<div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;X-DNS-Prefetch-Control&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;on&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="strict-transport-security" tabindex="-1"><a class="header-anchor" href="#strict-transport-security" aria-hidden="true">#</a> Strict-Transport-Security</h3><p>This header informs browsers it should only be accessed using HTTPS, instead of using HTTP. Using the configuration below, all present and future subdomains will use HTTPS for a<code>max-age</code>of 2 years. This blocks access to pages or subdomains that can only be served over HTTP.</p>`,3),h={href:"https://vercel.com/docs/concepts/edge-network/headers#strict-transport-security?utm_source=next-site&utm_medium=docs&utm_campaign=next-website",target:"_blank",rel:"noopener noreferrer"},k=s("a",{href:"/docs/guide/api-reference/next.config.js/headers"},[s("code",null,"headers")],-1),g=s("code",null,"next.config.js",-1),y=t(`<div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;Strict-Transport-Security&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;max-age=63072000; includeSubDomains; preload&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="x-xss-protection" tabindex="-1"><a class="header-anchor" href="#x-xss-protection" aria-hidden="true">#</a> X-XSS-Protection</h3><p>This header stops pages from loading when they detect reflected cross-site scripting (XSS) attacks. Although this protection is not necessary when sites implement a strong<a href="#content-security-policy"><code>Content-Security-Policy</code></a>disabling the use of inline JavaScript (<code>&#39;unsafe-inline&#39;</code>), it can still provide protection for older web browsers that don&#39;t support CSP.</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;X-XSS-Protection&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;1; mode=block&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="x-frame-options" tabindex="-1"><a class="header-anchor" href="#x-frame-options" aria-hidden="true">#</a> X-Frame-Options</h3><p>This header indicates whether the site should be allowed to be displayed within an<code>iframe</code>. This can prevent against clickjacking attacks. This header has been superseded by CSP&#39;s<code>frame-ancestors</code>option, which has better support in modern browsers.</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;X-Frame-Options&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;SAMEORIGIN&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="permissions-policy" tabindex="-1"><a class="header-anchor" href="#permissions-policy" aria-hidden="true">#</a> Permissions-Policy</h3>`,8),f=s("code",null,"Feature-Policy",-1),m={href:"https://www.w3.org/TR/permissions-policy-1/",target:"_blank",rel:"noopener noreferrer"},x=t(`<div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;Permissions-Policy&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;camera=(), microphone=(), geolocation=(), browsing-topics=()&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="x-content-type-options" tabindex="-1"><a class="header-anchor" href="#x-content-type-options" aria-hidden="true">#</a> X-Content-Type-Options</h3><p>This header prevents the browser from attempting to guess the type of content if the<code>Content-Type</code>header is not explicitly set. This can prevent XSS exploits for websites that allow users to upload and share files. For example, a user trying to download an image, but having it treated as a different<code>Content-Type</code>like an executable, which could be malicious. This header also applies to downloading browser extensions. The only valid value for this header is<code>nosniff</code>.</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;X-Content-Type-Options&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;nosniff&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="referrer-policy" tabindex="-1"><a class="header-anchor" href="#referrer-policy" aria-hidden="true">#</a> Referrer-Policy</h3>`,5),_={href:"https://scotthelme.co.uk/a-new-security-header-referrer-policy/",target:"_blank",rel:"noopener noreferrer"},b=t(`<div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;Referrer-Policy&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;origin-when-cross-origin&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="content-security-policy" tabindex="-1"><a class="header-anchor" href="#content-security-policy" aria-hidden="true">#</a> Content-Security-Policy</h3><p>This header helps prevent cross-site scripting (XSS), clickjacking and other code injection attacks. Content Security Policy (CSP) can specify allowed origins for content including scripts, stylesheets, images, fonts, objects, media (audio, video), iframes, and more.</p>`,3),v={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP",target:"_blank",rel:"noopener noreferrer"},w=t(`<p>You can add Content Security Policy directives using a template string.</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// Before defining your Security Headers</span>
<span class="token comment">// add Content Security Policy directives using a template string.</span>

<span class="token keyword">const</span> ContentSecurityPolicy <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
  default-src &#39;self&#39;;
  script-src &#39;self&#39;;
  child-src example.com;
  style-src &#39;self&#39; example.com;
  font-src &#39;self&#39;;  
</span><span class="token template-punctuation string">\`</span></span>

</code></pre></div><p>When a directive uses a keyword such as<code>self</code>, wrap it in single quotes<code>&#39;&#39;</code>.</p><p>In the header&#39;s value, replace the new line with a space.</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;Content-Security-Policy&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> ContentSecurityPolicy<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s{2,}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="references" tabindex="-1"><a class="header-anchor" href="#references" aria-hidden="true">#</a> References</h3>`,6),S={href:"https://developer.mozilla.org",target:"_blank",rel:"noopener noreferrer"},j={href:"https://blog.vnaik.com/posts/web-attacks.html",target:"_blank",rel:"noopener noreferrer"},T={href:"https://scotthelme.co.uk",target:"_blank",rel:"noopener noreferrer"},P={href:"https://observatory.mozilla.org/",target:"_blank",rel:"noopener noreferrer"},C=s("h2",{id:"related",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#related","aria-hidden":"true"},"#"),e(" Related")],-1),X=s("p",null,"For more information, we recommend the following sections:",-1);function H(N,I){const n=r("ExternalLinkIcon");return p(),c("div",null,[l,s("p",null,[e("This header controls DNS prefetching, allowing browsers to proactively perform domain name resolution on external links, images, CSS, JavaScript, and more. This prefetching is performed in the background, so the"),s("a",d,[e("DNS"),a(n)]),e("is more likely to be resolved by the time the referenced items are needed. This reduces latency when the user clicks a link.")]),u,s("p",null,[e("If you're deploying to"),s("a",h,[e("Vercel"),a(n)]),e(", this header is not necessary as it's automatically added to all deployments unless you declare"),k,e("in your"),g,e(".")]),y,s("p",null,[e("This header allows you to control which features and APIs can be used in the browser. It was previously named"),f,e(". You can view the full list of permission options"),s("a",m,[e("here"),a(n)]),e(".")]),x,s("p",null,[e("This header controls how much information the browser includes when navigating from the current website (origin) to another. You can read about the different options"),s("a",_,[e("here"),a(n)]),e(".")]),b,s("p",null,[e("You can read about the many different CSP options"),s("a",v,[e("here"),a(n)]),e(".")]),w,s("ul",null,[s("li",null,[s("a",S,[e("MDN"),a(n)]),e("- "),s("a",j,[e("Varun Naik"),a(n)]),e("- "),s("a",T,[e("Scott Helme"),a(n)]),e("- "),s("a",P,[e("Mozilla Observatory"),a(n)])])]),C,X])}const O=o(i,[["render",H],["__file","security-headers.html.vue"]]);export{O as default};
