import{_ as p,r as o,o as c,c as r,b as s,d as n,e as t,a as e}from"./app.1ad2624e.js";const l={},i=e('<h1 id="migrating-from-gatsby" tabindex="-1"><a class="header-anchor" href="#migrating-from-gatsby" aria-hidden="true">#</a> Migrating from Gatsby</h1><p>This guide will help you understand how to transition from an existing Gatsby project to Next.js. Migrating to Next.js will allow you to:</p><ul><li>Choose which<a href="/docs/guide/basic-features/data-fetching/overview">data fetching</a>strategy you want on a per-page basis.- Use<a href="/docs/guide/basic-features/data-fetching/incremental-static-regeneration">Incremental Static Regeneration</a>to updateexistingpages by re-rendering them in the background as traffic comes in.- Use<a href="/docs/guide/api-routes/introduction">API Routes</a>.</li></ul><p>And more! Let’s walk through a series of steps to complete the migration.</p><h2 id="updating-package-json-and-dependencies" tabindex="-1"><a class="header-anchor" href="#updating-package-json-and-dependencies" aria-hidden="true">#</a> Updating package.json and dependencies</h2><p>The first step towards migrating to Next.js is to update<code>package.json</code>and dependencies. You should:</p><ul><li>Remove all Gatsby-related packages (but keep<code>react</code>and<code>react-dom</code>).- Install<code>next</code>.- Add Next.js related commands to<code>scripts</code>. One is<code>next dev</code>, which runs a development server at<code>localhost:3000</code>. You should also add<code>next build</code>and<code>next start</code>for creating and starting a production build.</li></ul>',7),u=s("code",null,"package.json",-1),k={href:"https://github.com/leerob/gatsby-to-nextjs/pull/1/files#diff-b9cfc7f2cdf78a7f4b91a753d10865a2",target:"_blank",rel:"noopener noreferrer"},d=e(`<div class="language-json" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next dev&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;next start&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;next&quot;</span><span class="token operator">:</span> <span class="token string">&quot;latest&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;latest&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;latest&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="static-assets-and-compiled-output" tabindex="-1"><a class="header-anchor" href="#static-assets-and-compiled-output" aria-hidden="true">#</a> Static Assets and Compiled Output</h2>`,2),g=s("code",null,"public",-1),m={href:"https://github.com/leerob/gatsby-to-nextjs/pull/1/files#diff-a084b794bc0759e7a6b77810e01874f2",target:"_blank",rel:"noopener noreferrer"},h=e(`<ul><li>Remove<code>.cache/</code>and<code>public</code>from<code>.gitignore</code>and delete both directories.- Rename Gatsby’s<code>static</code>directory as<code>public</code>.- Add<code>.next</code>to<code>.gitignore</code>.</li></ul><h2 id="creating-routes" tabindex="-1"><a class="header-anchor" href="#creating-routes" aria-hidden="true">#</a> Creating Routes</h2><p>Both Gatsby and Next support a<code>pages</code>directory, which uses<a href="/docs/guide/routing/introduction">file-system based routing</a>. Gatsby&#39;s directory is<code>src/pages</code>, which is also<a href="/docs/guide/advanced-features/src-directory">supported by Next.js</a>.</p><p>Gatsby creates dynamic routes using the<code>createPages</code>API inside of<code>gatsby-node.js</code>. With Next, we can use<a href="/docs/guide/routing/dynamic-routes">Dynamic Routes</a>inside of<code>pages</code>to achieve the same effect. Rather than having a<code>template</code>directory, you can use the React component inside your dynamic route file. For example:</p><ul><li><strong>Gatsby:</strong><code>createPages</code>API inside<code>gatsby-node.js</code>for each blog post, then have a template file at<code>src/templates/blog-post.js</code>.- **Next:**Create<code>pages/blog/[slug].js</code>which contains the blog post template. The value of<code>slug</code>is accessible through a<a href="/docs/guide/routing/dynamic-routes">query parameter</a>. For example, the route<code>/blog/first-post</code>would forward the query object<code>{ &#39;slug&#39;: &#39;first-post&#39; }</code>to<code>pages/blog/[slug].js</code>(<a href="/docs/guide/basic-features/data-fetching/get-static-paths">learn more here</a>).</li></ul><h2 id="styling" tabindex="-1"><a class="header-anchor" href="#styling" aria-hidden="true">#</a> Styling</h2><p>With Gatsby, global CSS imports are included in<code>gatsby-browser.js</code>. With Next, you should create a<a href="/docs/guide/advanced-features/custom-app">custom<code>_app.js</code></a>for global CSS. When migrating, you can copy over your CSS imports directly and update the relative file path, if necessary. Next.js has<a href="/docs/guide/basic-features/built-in-css-support">built-in CSS support</a>.</p><h2 id="links" tabindex="-1"><a class="header-anchor" href="#links" aria-hidden="true">#</a> Links</h2><p>The Gatsby<code>Link</code>and Next.js<a href="/docs/guide/api-reference/next/link"><code>Link</code></a>component have a slightly different API.</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// Gatsby</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;gatsby&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">blog</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// Next.js</span>

<span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#39;next/link&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">blog</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

</code></pre></div><p>Update any import statements, switch<code>to</code>to<code>href</code>.</p><h2 id="data-fetching" tabindex="-1"><a class="header-anchor" href="#data-fetching" aria-hidden="true">#</a> Data Fetching</h2><p>The largest difference between Gatsby and Next.js is how data fetching is implemented. Gatsby is opinionated with GraphQL being the default strategy for retrieving data across your application. With Next.js, you get to choose which strategy you want (GraphQL is one supported option).</p><p>Gatsby uses the<code>graphql</code>tag to query data in the pages of your site. This may include local data, remote data, or information about your site configuration. Gatsby only allows the creation of static pages. With Next.js, you can choose on a<a href="/docs/guide/basic-features/pages">per-page basis</a>which<a href="/docs/guide/basic-features/data-fetching/overview">data fetching strategy</a>you want. For example,<code>getServerSideProps</code>allows you to do server-side rendering. If you wanted to generate a static page, you&#39;d export<code>getStaticProps</code>/<code>getStaticPaths</code>inside the page, rather than using<code>pageQuery</code>. For example:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// src/pages/[slug].js</span>

<span class="token comment">// Install remark and remark-html</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> remark <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;remark&#39;</span>
<span class="token keyword">import</span> html <span class="token keyword">from</span> <span class="token string">&#39;remark-html&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getPostBySlug<span class="token punctuation">,</span> getAllPosts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../lib/blog&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticProps</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token function">getPostBySlug</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>slug<span class="token punctuation">)</span>
  <span class="token keyword">const</span> markdown <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">remark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>content <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> markdown<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>post<span class="token punctuation">,</span>
      content<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStaticPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> <span class="token function">getAllPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">paths</span><span class="token operator">:</span> posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">slug</span><span class="token operator">:</span> post<span class="token punctuation">.</span>slug<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div>`,16),y=s("code",null,"gatsby-source-filesystem",-1),f=s("code",null,"gatsby-transformer-remark",-1),b={href:"https://github.com/gatsbyjs/gatsby-starter-blog/blob/master/package.json",target:"_blank",rel:"noopener noreferrer"},w=s("code",null,"fs",-1),x=s("code",null,"getStaticProps",-1),q=s("code",null,"getStaticPaths",-1),v=e(`<div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// src/lib/blog.js</span>

<span class="token comment">// Install gray-matter and date-fns</span>
<span class="token keyword">import</span> matter <span class="token keyword">from</span> <span class="token string">&#39;gray-matter&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> parseISO<span class="token punctuation">,</span> format <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;date-fns&#39;</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">&#39;fs&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> join <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>

<span class="token comment">// Add markdown files in \`src/content/blog\`</span>
<span class="token keyword">const</span> postsDirectory <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;blog&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getPostBySlug</span><span class="token punctuation">(</span><span class="token parameter">slug</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> realSlug <span class="token operator">=</span> slug<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.md$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> fullPath <span class="token operator">=</span> <span class="token function">join</span><span class="token punctuation">(</span>postsDirectory<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>realSlug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.md</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> fileContents <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>fullPath<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> content <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">matter</span><span class="token punctuation">(</span>fileContents<span class="token punctuation">)</span>
  <span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token function">parseISO</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;MMMM dd, yyyy&#39;</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">slug</span><span class="token operator">:</span> realSlug<span class="token punctuation">,</span> <span class="token literal-property property">frontmatter</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>data<span class="token punctuation">,</span> date <span class="token punctuation">}</span><span class="token punctuation">,</span> content <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getAllPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> slugs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>postsDirectory<span class="token punctuation">)</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> slugs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">slug</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getPostBySlug</span><span class="token punctuation">(</span>slug<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> posts
<span class="token punctuation">}</span>

</code></pre></div><h2 id="image-component-and-image-optimization" tabindex="-1"><a class="header-anchor" href="#image-component-and-image-optimization" aria-hidden="true">#</a> Image Component and Image Optimization</h2><p>Next.js has a built-in<a href="/docs/guide/basic-features/image-optimization">Image Component and Automatic Image Optimization</a>.</p><p>The Next.js Image Component,<a href="/docs/guide/api-reference/next/image"><code>next/image</code></a>, is an extension of the HTML<code>&lt;img&gt;</code>element, evolved for the modern web.</p>`,4),j={href:"https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types",target:"_blank",rel:"noopener noreferrer"},_=e(`<h3 id="migrating-from-gatsby-image" tabindex="-1"><a class="header-anchor" href="#migrating-from-gatsby-image" aria-hidden="true">#</a> Migrating from Gatsby Image</h3><p>Instead of optimizing images at build time, Next.js optimizes images on-demand, as users request them. Unlike static site generators and static-only solutions, your build times aren&#39;t increased, whether shipping 10 images or 10 million images.</p><p>This means you can remove common Gatsby plugins like:</p><ul><li><code>gatsby-image</code>- <code>gatsby-transformer-sharp</code>- <code>gatsby-plugin-sharp</code></li></ul><p>Instead, use the built-in<a href="/docs/guide/api-reference/next/image"><code>next/image</code></a>component and<a href="/docs/guide/basic-features/image-optimization">Automatic Image Optimization</a>.</p><blockquote><p>The<code>next/image</code>component&#39;s default loader is not supported when using<a href="/docs/guide/advanced-features/static-html-export"><code>next export</code></a>. However, other loader options will work.</p></blockquote><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> Image <span class="token keyword">from</span> <span class="token string">&#39;next/image&#39;</span>
<span class="token keyword">import</span> profilePic <span class="token keyword">from</span> <span class="token string">&#39;../public/me.png&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">My Homepage</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Image</span></span>
        <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>profilePic<span class="token punctuation">}</span></span>
        <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Picture of the author<span class="token punctuation">&quot;</span></span>
        <span class="token comment">// When &quot;responsive&quot;, similar to &quot;fluid&quot; from Gatsby</span>
        <span class="token comment">// When &quot;intrinsic&quot;, similar to &quot;fluid&quot; with maxWidth from Gatsby</span>
        <span class="token comment">// When &quot;fixed&quot;, similar to &quot;fixed&quot; from Gatsby</span>
        <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>responsive<span class="token punctuation">&quot;</span></span>
        <span class="token comment">// Optional, similar to &quot;blur-up&quot; from Gatsby</span>
        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blur<span class="token punctuation">&quot;</span></span>
        <span class="token comment">// Optional, similar to &quot;width&quot; in Gatsby GraphQL</span>
        <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span></span>
        <span class="token comment">// Optional, similar to &quot;height&quot; in Gatsby GraphQL</span>
        <span class="token attr-name">height</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Welcome to my homepage!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="site-configuration" tabindex="-1"><a class="header-anchor" href="#site-configuration" aria-hidden="true">#</a> Site Configuration</h2><p>With Gatsby, your site&#39;s metadata (name, description, etc.) is located inside<code>gatsby-config.js</code>. This is then exposed through the GraphQL API and consumed through a<code>pageQuery</code>or a static query inside a component.</p><p>With Next.js, we recommend creating a config file similar to below. You can then import this file anywhere without having to use GraphQL to access your site&#39;s metadata.</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// src/config.js</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;Starter Blog&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Lee Robinson&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">summary</span><span class="token operator">:</span> <span class="token string">&#39;who loves Next.js.&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;A starter blog converting Gatsby -&gt; Next.&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">social</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">twitter</span><span class="token operator">:</span> <span class="token string">&#39;leeerob&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="search-engine-optimization" tabindex="-1"><a class="header-anchor" href="#search-engine-optimization" aria-hidden="true">#</a> Search Engine Optimization</h2><p>Most Gatsby examples use<code>react-helmet</code>to assist with adding<code>meta</code>tags for proper SEO. With Next.js, we use<a href="/docs/guide/api-reference/next/head"><code>next/head</code></a>to add<code>meta</code>tags to your<code>&lt;head /&gt;</code>element. For example, here&#39;s an SEO component with Gatsby:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// src/components/seo.js</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Helmet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-helmet&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token constant">SEO</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> description<span class="token punctuation">,</span> title<span class="token punctuation">,</span> siteTitle <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Helmet
      title<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span>
      titleTemplate<span class="token operator">=</span><span class="token punctuation">{</span>siteTitle <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">%s | </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>siteTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
      meta<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">description</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> description<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">property</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">og:title</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> title<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">property</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">og:description</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> description<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">property</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">og:type</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">website</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">twitter:card</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">summary</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">twitter:creator</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> twitter<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">twitter:title</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> title<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">twitter:description</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> description<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>And here&#39;s the same example using Next.js, including reading from a site config file.</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// src/components/seo.js</span>

<span class="token keyword">import</span> Head <span class="token keyword">from</span> <span class="token string">&#39;next/head&#39;</span>
<span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">&#39;../config&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token constant">SEO</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> description<span class="token punctuation">,</span> title <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> siteTitle <span class="token operator">=</span> config<span class="token punctuation">.</span>title

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Head<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> | </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>siteTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;description&quot;</span> content<span class="token operator">=</span><span class="token punctuation">{</span>description<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;og:type&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;website&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;og:title&quot;</span> content<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;og:description&quot;</span> content<span class="token operator">=</span><span class="token punctuation">{</span>description<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;og:site_name&quot;</span> content<span class="token operator">=</span><span class="token punctuation">{</span>siteTitle<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;twitter:card&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;summary&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;twitter:creator&quot;</span> content<span class="token operator">=</span><span class="token punctuation">{</span>config<span class="token punctuation">.</span>social<span class="token punctuation">.</span>twitter<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;twitter:title&quot;</span> content<span class="token operator">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>meta property<span class="token operator">=</span><span class="token string">&quot;twitter:description&quot;</span> content<span class="token operator">=</span><span class="token punctuation">{</span>description<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="learn-more" tabindex="-1"><a class="header-anchor" href="#learn-more" aria-hidden="true">#</a> Learn more</h2>`,17),S={href:"https://github.com/leerob/gatsby-to-nextjs/pull/1",target:"_blank",rel:"noopener noreferrer"},G={href:"https://github.com/vercel/next.js/discussions",target:"_blank",rel:"noopener noreferrer"};function N(I,P){const a=o("ExternalLinkIcon");return c(),r("div",null,[i,s("p",null,[n("Here's an example"),u,n("("),s("a",k,[n("view diff"),t(a)]),n("):")]),d,s("p",null,[n("Gatsby uses the"),g,n("directory for the compiled output, whereas Next.js uses it for static assets. Here are the steps for migration ("),s("a",m,[n("view diff"),t(a)]),n("):")]),h,s("p",null,[n("You'll commonly see Gatsby plugins used for reading the file system ("),y,n("), handling markdown files ("),f,n("), and so on. For example, the popular starter blog example has"),s("a",b,[n("15 Gatsby specific packages"),t(a)]),n(". Next takes a different approach. It includes common features directly inside the framework, and gives the user full control over integrations with external packages. For example, rather than abstracting reading from the file system to a plugin, you can use the native Node.js"),w,n("package inside"),x,n("/"),q,n("to read from the file system.")]),v,s("p",null,[n("The Automatic Image Optimization allows for resizing, optimizing, and serving images in modern formats like"),s("a",j,[n("WebP"),t(a)]),n("when the browser supports it. This avoids shipping large images to devices with a smaller viewport. It also allows Next.js to automatically adopt future image formats and serve them to browsers that support those formats.")]),_,s("p",null,[n("Take a look at"),s("a",S,[n("this pull request"),t(a)]),n("for more details on how an app can be migrated from Gatsby to Next.js. If you have questions or if this guide didn't work for you, feel free to reach out to our community on"),s("a",G,[n("GitHub Discussions"),t(a)]),n(".")])])}const L=p(l,[["render",N],["__file","from-gatsby.html.vue"]]);export{L as default};
