import{_ as a,r,o as p,c as l,b as s,d as e,e as o,a as t}from"./app.1ad2624e.js";const c={},i=s("h1",{id:"customizing-postcss-config",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#customizing-postcss-config","aria-hidden":"true"},"#"),e(" Customizing PostCSS Config")],-1),u={class:"custom-container details"},d=s("summary",null,"示例",-1),g={href:"https://github.com/vercel/next.js/tree/canary/examples/with-tailwindcss",target:"_blank",rel:"noopener noreferrer"},h=s("h2",{id:"default-behavior",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#default-behavior","aria-hidden":"true"},"#"),e(" Default Behavior")],-1),f=s("p",null,[e("Next.js compiles CSS for its"),s("a",{href:"/docs/guide/basic-features/built-in-css-support"},"built-in CSS support"),e("using PostCSS.")],-1),k=s("p",null,"Out of the box, with no configuration, Next.js compiles CSS with the following transformations:",-1),_={href:"https://github.com/postcss/autoprefixer",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/philipwalton/flexbugs",target:"_blank",rel:"noopener noreferrer"},m={href:"https://www.w3.org/TR/css-flexbox-1/",target:"_blank",rel:"noopener noreferrer"},x={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/all",target:"_blank",rel:"noopener noreferrer"},S=s("code",null,"all",-1),y={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/break-after",target:"_blank",rel:"noopener noreferrer"},v={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant",target:"_blank",rel:"noopener noreferrer"},w=s("code",null,"font-variant",-1),C={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/gap",target:"_blank",rel:"noopener noreferrer"},q={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries#Syntax_improvements_in_Level_4",target:"_blank",rel:"noopener noreferrer"},j={href:"https://www.w3.org/TR/css-grid-1/",target:"_blank",rel:"noopener noreferrer"},z={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/var",target:"_blank",rel:"noopener noreferrer"},N=s("strong",null,"not compiled",-1),P={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/grid",target:"_blank",rel:"noopener noreferrer"},E=s("div",{class:"language-css","data-ext":"css"},[s("pre",{class:"language-css"},[s("code",null,[s("span",{class:"token comment"},"/* autoprefixer grid: autoplace */"),e(`

`)])])],-1),I={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/grid",target:"_blank",rel:"noopener noreferrer"},T=s("a",{href:"#customizing-plugins"},'"Customizing Plugins"',-1),W=s("details",{class:"custom-container details"},[s("summary",null,"示例"),s("p",null,[s("strong",null,"Click to view the configuration to enable CSS Grid Layout"),e('```json { "plugins": [ "postcss-flexbugs-fixes", [ "postcss-preset-env", { "autoprefixer": { "flexbox": "no-2009", "grid": "autoplace" }, "stage": 3, "features": { "custom-properties": false } } ] ] }')]),s("div",{class:"language-text","data-ext":"text"},[s("pre",{class:"language-text"},[s("code")])])],-1),B={href:"https://github.com/MadLittleMods/postcss-css-variables#caveats",target:"_blank",rel:"noopener noreferrer"},U={href:"https://sass-lang.com/documentation/variables",target:"_blank",rel:"noopener noreferrer"},M={href:"https://sass-lang.com/",target:"_blank",rel:"noopener noreferrer"},L=s("h2",{id:"customizing-target-browsers",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#customizing-target-browsers","aria-hidden":"true"},"#"),e(" Customizing Target Browsers")],-1),G={href:"https://github.com/postcss/autoprefixer",target:"_blank",rel:"noopener noreferrer"},V={href:"https://github.com/browserslist/browserslist",target:"_blank",rel:"noopener noreferrer"},Y=t(`<p>To customize browserslist, create a<code>browserslist</code>key in your<code>package.json</code>like so:</p><div class="language-json" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&gt;0.3%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not ie 11&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not dead&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not op_mini all&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div>`,2),A={href:"https://browsersl.ist/?q=%3E0.3%25%2C+not+ie+11%2C+not+dead%2C+not+op_mini+all",target:"_blank",rel:"noopener noreferrer"},D=t('<h2 id="css-modules" tabindex="-1"><a class="header-anchor" href="#css-modules" aria-hidden="true">#</a> CSS Modules</h2><p>No configuration is needed to support CSS Modules. To enable CSS Modules for a file, rename the file to have the extension<code>.module.css</code>.</p><p>You can learn more about<a href="/docs/guide/basic-features/built-in-css-support">Next.js&#39; CSS Module support here</a>.</p><h2 id="customizing-plugins" tabindex="-1"><a class="header-anchor" href="#customizing-plugins" aria-hidden="true">#</a> Customizing Plugins</h2>',4),R=s("strong",null,"Warning",-1),O=s("strong",null,"completely disables",-1),Q=s("a",{href:"#default-behavior"},"default behavior",-1),F={href:"https://github.com/postcss/autoprefixer",target:"_blank",rel:"noopener noreferrer"},H=s("code",null,"npm install postcss-flexbugs-fixes postcss-preset-env",-1),J=t(`<p>To customize the PostCSS configuration, create a<code>postcss.config.json</code>file in the root of your project.</p><p>This is the default configuration used by Next.js:</p><div class="language-json" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;postcss-flexbugs-fixes&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;autoprefixer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;flexbox&quot;</span><span class="token operator">:</span> <span class="token string">&quot;no-2009&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;stage&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;features&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;custom-properties&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote><p><strong>Note</strong>: Next.js also allows the file to be named<code>.postcssrc.json</code>, or, to be read from the<code>postcss</code>key in<code>package.json</code>.</p></blockquote><p>It is also possible to configure PostCSS with a<code>postcss.config.js</code>file, which is useful when you want to conditionally include plugins based on environment:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span>
    process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;production&#39;</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span>
          <span class="token string">&#39;postcss-flexbugs-fixes&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span>
            <span class="token string">&#39;postcss-preset-env&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">autoprefixer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">flexbox</span><span class="token operator">:</span> <span class="token string">&#39;no-2009&#39;</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token literal-property property">stage</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
              <span class="token literal-property property">features</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&#39;custom-properties&#39;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// No transformations in development</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><blockquote><p><strong>Note</strong>: Next.js also allows the file to be named<code>.postcssrc.js</code>.</p></blockquote><p>Do**not use<code>require()</code>**to import the PostCSS Plugins. Plugins must be provided as strings.</p><blockquote><p><strong>Note</strong>: If your<code>postcss.config.js</code>needs to support other non-Next.js tools in the same project, you must use the interoperable object-based format instead:\`\`\`js module.exports = { plugins: { &#39;postcss-flexbugs-fixes&#39;: {}, &#39;postcss-preset-env&#39;: { autoprefixer: { flexbox: &#39;no-2009&#39;, }, stage: 3, features: { &#39;custom-properties&#39;: false, }, }, }, }</p></blockquote><div class="language-text" data-ext="text"><pre class="language-text"><code></code></pre></div>`,10);function K(X,Z){const n=r("ExternalLinkIcon");return p(),l("div",null,[i,s("details",u,[d,s("ul",null,[s("li",null,[s("a",g,[e("Tailwind CSS Example"),o(n)])])])]),h,f,k,s("ul",null,[s("li",null,[s("a",_,[e("Autoprefixer"),o(n)]),e("automatically adds vendor prefixes to CSS rules (back to IE11).- "),s("a",b,[e("Cross-browser Flexbox bugs"),o(n)]),e("are corrected to behave like"),s("a",m,[e("the spec"),o(n)]),e(".- New CSS features are automatically compiled for Internet Explorer 11 compatibility:- "),s("a",x,[S,e("Property"),o(n)]),e("- "),s("a",y,[e("Break Properties"),o(n)]),e("- "),s("a",v,[w,e("Property"),o(n)]),e("- "),s("a",C,[e("Gap Properties"),o(n)]),e("- "),s("a",q,[e("Media Query Ranges"),o(n)])])]),s("p",null,[e("By default,"),s("a",j,[e("CSS Grid"),o(n)]),e("and"),s("a",z,[e("Custom Properties"),o(n)]),e("(CSS variables) are"),N,e("for IE11 support.")]),s("p",null,[e("To compile"),s("a",P,[e("CSS Grid Layout"),o(n)]),e("for IE11, you can place the following comment at the top of your CSS file:")]),E,s("p",null,[e("You can also enable IE11 support for"),s("a",I,[e("CSS Grid Layout"),o(n)]),e("in your entire project by configuring autoprefixer with the configuration shown below (collapsed). See"),T,e("below for more information.")]),W,s("p",null,[e("CSS variables are not compiled because it is"),s("a",B,[e("not possible to safely do so"),o(n)]),e(". If you must use variables, consider using something like"),s("a",U,[e("Sass variables"),o(n)]),e("which are compiled away by"),s("a",M,[e("Sass"),o(n)]),e(".")]),L,s("p",null,[e("Next.js allows you to configure the target browsers (for"),s("a",G,[e("Autoprefixer"),o(n)]),e("and compiled css features) through"),s("a",V,[e("Browserslist"),o(n)]),e(".")]),Y,s("p",null,[e("You can use the"),s("a",A,[e("browsersl.ist"),o(n)]),e("tool to visualize what browsers you are targeting.")]),D,s("blockquote",null,[s("p",null,[R,e(": When you define a custom PostCSS configuration file, Next.js"),O,e("the"),Q,e(". Be sure to manually configure all the features you need compiled, including"),s("a",F,[e("Autoprefixer"),o(n)]),e(". You also need to install any plugins included in your custom configuration manually, i.e."),H,e(".")])]),J])}const ss=a(c,[["render",K],["__file","customizing-postcss-config.html.vue"]]);export{ss as default};
