<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.53">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Upgrade Guide</title><meta name="description" content="阅读官方文档快速上手 Next.js，并了解所有功能的详细信息！">
    <link rel="preload" href="/assets/style.7a88b36f.css" as="style" /><link rel="stylesheet" href="/assets/style.7a88b36f.css" />
    <link rel="modulepreload" href="/assets/app.1ad2624e.js"><link rel="modulepreload" href="/assets/upgrading.html.7dae5f22.js"><link rel="modulepreload" href="/assets/upgrading.html.278c4b76.js"><link rel="prefetch" href="/assets/index.html.8b96065d.js" as="script" /><link rel="prefetch" href="/assets/cli.html.31226889.js" as="script" /><link rel="prefetch" href="/assets/create-next-app.html.83451ed4.js" as="script" /><link rel="prefetch" href="/assets/edge-runtime.html.5fca962f.js" as="script" /><link rel="prefetch" href="/assets/accessibility.html.3089eb4c.js" as="script" /><link rel="prefetch" href="/assets/authentication.html.2d11bad4.js" as="script" /><link rel="prefetch" href="/assets/deployment.html.908a27cb.js" as="script" /><link rel="prefetch" href="/assets/faq.html.efcb0093.js" as="script" /><link rel="prefetch" href="/assets/getting-started.html.8a368920.js" as="script" /><link rel="prefetch" href="/assets/going-to-production.html.fa2adbe4.js" as="script" /><link rel="prefetch" href="/assets/testing.html.71fbb88a.js" as="script" /><link rel="prefetch" href="/assets/get-initial-props.html.d387f54c.js" as="script" /><link rel="prefetch" href="/assets/get-server-side-props.html.011d693c.js" as="script" /><link rel="prefetch" href="/assets/get-static-paths.html.1e2fca2c.js" as="script" /><link rel="prefetch" href="/assets/get-static-props.html.7f4ea564.js" as="script" /><link rel="prefetch" href="/assets/amp.html.752c3ae5.js" as="script" /><link rel="prefetch" href="/assets/font.html.e662f31f.js" as="script" /><link rel="prefetch" href="/assets/head.html.da3264aa.js" as="script" /><link rel="prefetch" href="/assets/image.html.7ac297cb.js" as="script" /><link rel="prefetch" href="/assets/link.html.38c8e98e.js" as="script" /><link rel="prefetch" href="/assets/router.html.584bd164.js" as="script" /><link rel="prefetch" href="/assets/script.html.4935dae4.js" as="script" /><link rel="prefetch" href="/assets/server.html.1738b749.js" as="script" /><link rel="prefetch" href="/assets/basepath.html.ea794d74.js" as="script" /><link rel="prefetch" href="/assets/build-indicator.html.88bba073.js" as="script" /><link rel="prefetch" href="/assets/cdn-support-with-asset-prefix.html.1e722576.js" as="script" /><link rel="prefetch" href="/assets/compression.html.b128a319.js" as="script" /><link rel="prefetch" href="/assets/configuring-onDemandEntries.html.f1cedf43.js" as="script" /><link rel="prefetch" href="/assets/configuring-the-build-id.html.1ae88113.js" as="script" /><link rel="prefetch" href="/assets/custom-page-extensions.html.aa28b0f3.js" as="script" /><link rel="prefetch" href="/assets/custom-webpack-config.html.e6a5095e.js" as="script" /><link rel="prefetch" href="/assets/disabling-etag-generation.html.7ff62097.js" as="script" /><link rel="prefetch" href="/assets/disabling-http-keep-alive.html.747f90a8.js" as="script" /><link rel="prefetch" href="/assets/disabling-x-powered-by.html.7d7cb3c2.js" as="script" /><link rel="prefetch" href="/assets/environment-variables.html.9e17ccb8.js" as="script" /><link rel="prefetch" href="/assets/exportPathMap.html.ab19297c.js" as="script" /><link rel="prefetch" href="/assets/headers.html.27224615.js" as="script" /><link rel="prefetch" href="/assets/ignoring-eslint.html.e02922c9.js" as="script" /><link rel="prefetch" href="/assets/ignoring-typescript-errors.html.47cd30e6.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.ca549cc6.js" as="script" /><link rel="prefetch" href="/assets/react-strict-mode.html.afa394c5.js" as="script" /><link rel="prefetch" href="/assets/redirects.html.580b7251.js" as="script" /><link rel="prefetch" href="/assets/rewrites.html.039d75f6.js" as="script" /><link rel="prefetch" href="/assets/runtime-configuration.html.d59e5c49.js" as="script" /><link rel="prefetch" href="/assets/setting-a-custom-build-directory.html.e6bf9565.js" as="script" /><link rel="prefetch" href="/assets/static-optimization-indicator.html.f7c06bb6.js" as="script" /><link rel="prefetch" href="/assets/trailing-slash.html.9b9abcf3.js" as="script" /><link rel="prefetch" href="/assets/url-imports.html.42c3dea3.js" as="script" /><link rel="prefetch" href="/assets/automatic-static-optimization.html.4aa1cfc8.js" as="script" /><link rel="prefetch" href="/assets/ci-build-caching.html.c99104e7.js" as="script" /><link rel="prefetch" href="/assets/codemods.html.28469269.js" as="script" /><link rel="prefetch" href="/assets/compiler.html.37388557.js" as="script" /><link rel="prefetch" href="/assets/custom-app.html.e20a85c8.js" as="script" /><link rel="prefetch" href="/assets/custom-document.html.512c8805.js" as="script" /><link rel="prefetch" href="/assets/custom-error-page.html.1e20bb2f.js" as="script" /><link rel="prefetch" href="/assets/custom-server.html.9af99d1a.js" as="script" /><link rel="prefetch" href="/assets/customizing-babel-config.html.5382e005.js" as="script" /><link rel="prefetch" href="/assets/customizing-postcss-config.html.2f7f8584.js" as="script" /><link rel="prefetch" href="/assets/debugging.html.4778b098.js" as="script" /><link rel="prefetch" href="/assets/dynamic-import.html.10c74642.js" as="script" /><link rel="prefetch" href="/assets/error-handling.html.daa6d944.js" as="script" /><link rel="prefetch" href="/assets/i18n-routing.html.2557b857.js" as="script" /><link rel="prefetch" href="/assets/measuring-performance.html.8f5e11c6.js" as="script" /><link rel="prefetch" href="/assets/middleware.html.856dc364.js" as="script" /><link rel="prefetch" href="/assets/module-path-aliases.html.903b42e6.js" as="script" /><link rel="prefetch" href="/assets/multi-zones.html.771e03c3.js" as="script" /><link rel="prefetch" href="/assets/output-file-tracing.html.29e34709.js" as="script" /><link rel="prefetch" href="/assets/preview-mode.html.f8054990.js" as="script" /><link rel="prefetch" href="/assets/security-headers.html.54bb71be.js" as="script" /><link rel="prefetch" href="/assets/source-maps.html.73505f40.js" as="script" /><link rel="prefetch" href="/assets/src-directory.html.9a2841c3.js" as="script" /><link rel="prefetch" href="/assets/static-html-export.html.788ca730.js" as="script" /><link rel="prefetch" href="/assets/turbopack.html.976fc5e8.js" as="script" /><link rel="prefetch" href="/assets/using-mdx.html.03abee55.js" as="script" /><link rel="prefetch" href="/assets/dynamic-api-routes.html.6d5ba1e1.js" as="script" /><link rel="prefetch" href="/assets/edge-api-routes.html.4d52ef59.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.fa3b960c.js" as="script" /><link rel="prefetch" href="/assets/request-helpers.html.8a0ef224.js" as="script" /><link rel="prefetch" href="/assets/response-helpers.html.4a160faa.js" as="script" /><link rel="prefetch" href="/assets/built-in-css-support.html.2f06406e.js" as="script" /><link rel="prefetch" href="/assets/environment-variables.html.372846d7.js" as="script" /><link rel="prefetch" href="/assets/eslint.html.728c370c.js" as="script" /><link rel="prefetch" href="/assets/fast-refresh.html.a0c58c9c.js" as="script" /><link rel="prefetch" href="/assets/font-optimization.html.2f6419da.js" as="script" /><link rel="prefetch" href="/assets/image-optimization.html.bd5f2065.js" as="script" /><link rel="prefetch" href="/assets/layouts.html.51949b14.js" as="script" /><link rel="prefetch" href="/assets/pages.html.bb5ff7c5.js" as="script" /><link rel="prefetch" href="/assets/script.html.d967efba.js" as="script" /><link rel="prefetch" href="/assets/static-file-serving.html.3cbe21c1.js" as="script" /><link rel="prefetch" href="/assets/supported-browsers-features.html.834d22e9.js" as="script" /><link rel="prefetch" href="/assets/typescript.html.9283ff3a.js" as="script" /><link rel="prefetch" href="/assets/building-forms.html.9fb23f38.js" as="script" /><link rel="prefetch" href="/assets/from-create-react-app.html.5ac03c36.js" as="script" /><link rel="prefetch" href="/assets/from-gatsby.html.a19df613.js" as="script" /><link rel="prefetch" href="/assets/from-react-router.html.b039afc0.js" as="script" /><link rel="prefetch" href="/assets/incremental-adoption.html.07e6550d.js" as="script" /><link rel="prefetch" href="/assets/dynamic-routes.html.275cc9d2.js" as="script" /><link rel="prefetch" href="/assets/imperatively.html.c59bf9aa.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.4651744c.js" as="script" /><link rel="prefetch" href="/assets/shallow-routing.html.3ac2bf70.js" as="script" /><link rel="prefetch" href="/assets/image.html.bf29222f.js" as="script" /><link rel="prefetch" href="/assets/adding-amp-components.html.95439540.js" as="script" /><link rel="prefetch" href="/assets/amp-in-static-html-export.html.f632924b.js" as="script" /><link rel="prefetch" href="/assets/amp-validation.html.f4281d11.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.61ddc4e7.js" as="script" /><link rel="prefetch" href="/assets/typescript.html.f03fc17e.js" as="script" /><link rel="prefetch" href="/assets/overview.html.c7c1af22.js" as="script" /><link rel="prefetch" href="/assets/server-components.html.1bea8587.js" as="script" /><link rel="prefetch" href="/assets/streaming.html.2e3d680a.js" as="script" /><link rel="prefetch" href="/assets/switchable-runtime.html.ca86b77b.js" as="script" /><link rel="prefetch" href="/assets/client-side.html.60925145.js" as="script" /><link rel="prefetch" href="/assets/get-server-side-props.html.a8261801.js" as="script" /><link rel="prefetch" href="/assets/get-static-paths.html.a3c97401.js" as="script" /><link rel="prefetch" href="/assets/get-static-props.html.cdc9a32b.js" as="script" /><link rel="prefetch" href="/assets/incremental-static-regeneration.html.4a38a442.js" as="script" /><link rel="prefetch" href="/assets/overview.html.9fd34be3.js" as="script" /><link rel="prefetch" href="/assets/404.html.c3e557d0.js" as="script" /><link rel="prefetch" href="/assets/index.html.63e21a3b.js" as="script" /><link rel="prefetch" href="/assets/cli.html.309c7331.js" as="script" /><link rel="prefetch" href="/assets/create-next-app.html.84be742a.js" as="script" /><link rel="prefetch" href="/assets/edge-runtime.html.2d6f1a7d.js" as="script" /><link rel="prefetch" href="/assets/accessibility.html.dfdba72c.js" as="script" /><link rel="prefetch" href="/assets/authentication.html.226c2605.js" as="script" /><link rel="prefetch" href="/assets/deployment.html.4a671dec.js" as="script" /><link rel="prefetch" href="/assets/faq.html.1cd7dba2.js" as="script" /><link rel="prefetch" href="/assets/getting-started.html.c3bfd9f3.js" as="script" /><link rel="prefetch" href="/assets/going-to-production.html.26f8502d.js" as="script" /><link rel="prefetch" href="/assets/testing.html.677bd84e.js" as="script" /><link rel="prefetch" href="/assets/get-initial-props.html.0219183c.js" as="script" /><link rel="prefetch" href="/assets/get-server-side-props.html.d519619e.js" as="script" /><link rel="prefetch" href="/assets/get-static-paths.html.a9b5f15e.js" as="script" /><link rel="prefetch" href="/assets/get-static-props.html.30b47af4.js" as="script" /><link rel="prefetch" href="/assets/amp.html.9ef4a8dd.js" as="script" /><link rel="prefetch" href="/assets/font.html.bd2d2589.js" as="script" /><link rel="prefetch" href="/assets/head.html.b8727f71.js" as="script" /><link rel="prefetch" href="/assets/image.html.f7d595ba.js" as="script" /><link rel="prefetch" href="/assets/link.html.b4e71efb.js" as="script" /><link rel="prefetch" href="/assets/router.html.4f5fae3d.js" as="script" /><link rel="prefetch" href="/assets/script.html.8e5d9250.js" as="script" /><link rel="prefetch" href="/assets/server.html.4693820d.js" as="script" /><link rel="prefetch" href="/assets/basepath.html.0ef0885b.js" as="script" /><link rel="prefetch" href="/assets/build-indicator.html.478d13dd.js" as="script" /><link rel="prefetch" href="/assets/cdn-support-with-asset-prefix.html.d2d2812f.js" as="script" /><link rel="prefetch" href="/assets/compression.html.6eb96a9f.js" as="script" /><link rel="prefetch" href="/assets/configuring-onDemandEntries.html.8095e277.js" as="script" /><link rel="prefetch" href="/assets/configuring-the-build-id.html.9928ae72.js" as="script" /><link rel="prefetch" href="/assets/custom-page-extensions.html.c3dc78be.js" as="script" /><link rel="prefetch" href="/assets/custom-webpack-config.html.d8a7eb74.js" as="script" /><link rel="prefetch" href="/assets/disabling-etag-generation.html.c3b4fb5b.js" as="script" /><link rel="prefetch" href="/assets/disabling-http-keep-alive.html.76a455db.js" as="script" /><link rel="prefetch" href="/assets/disabling-x-powered-by.html.56594c38.js" as="script" /><link rel="prefetch" href="/assets/environment-variables.html.129014f9.js" as="script" /><link rel="prefetch" href="/assets/exportPathMap.html.66d5a6e9.js" as="script" /><link rel="prefetch" href="/assets/headers.html.93bc754c.js" as="script" /><link rel="prefetch" href="/assets/ignoring-eslint.html.63fc6a3d.js" as="script" /><link rel="prefetch" href="/assets/ignoring-typescript-errors.html.b3216127.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.08546dc0.js" as="script" /><link rel="prefetch" href="/assets/react-strict-mode.html.80f2a803.js" as="script" /><link rel="prefetch" href="/assets/redirects.html.f1c21429.js" as="script" /><link rel="prefetch" href="/assets/rewrites.html.a401927d.js" as="script" /><link rel="prefetch" href="/assets/runtime-configuration.html.59968fee.js" as="script" /><link rel="prefetch" href="/assets/setting-a-custom-build-directory.html.de1ac480.js" as="script" /><link rel="prefetch" href="/assets/static-optimization-indicator.html.cf06bb12.js" as="script" /><link rel="prefetch" href="/assets/trailing-slash.html.267913f3.js" as="script" /><link rel="prefetch" href="/assets/url-imports.html.5ff06d22.js" as="script" /><link rel="prefetch" href="/assets/automatic-static-optimization.html.03ef96fc.js" as="script" /><link rel="prefetch" href="/assets/ci-build-caching.html.f20cef82.js" as="script" /><link rel="prefetch" href="/assets/codemods.html.103dbc07.js" as="script" /><link rel="prefetch" href="/assets/compiler.html.6b1098ae.js" as="script" /><link rel="prefetch" href="/assets/custom-app.html.9ca53baf.js" as="script" /><link rel="prefetch" href="/assets/custom-document.html.834da74c.js" as="script" /><link rel="prefetch" href="/assets/custom-error-page.html.3313d916.js" as="script" /><link rel="prefetch" href="/assets/custom-server.html.65115cb4.js" as="script" /><link rel="prefetch" href="/assets/customizing-babel-config.html.170bfeae.js" as="script" /><link rel="prefetch" href="/assets/customizing-postcss-config.html.6f4937b3.js" as="script" /><link rel="prefetch" href="/assets/debugging.html.49472d34.js" as="script" /><link rel="prefetch" href="/assets/dynamic-import.html.45ea880c.js" as="script" /><link rel="prefetch" href="/assets/error-handling.html.df2ed011.js" as="script" /><link rel="prefetch" href="/assets/i18n-routing.html.66e1753f.js" as="script" /><link rel="prefetch" href="/assets/measuring-performance.html.ac6b3488.js" as="script" /><link rel="prefetch" href="/assets/middleware.html.8d5af8f2.js" as="script" /><link rel="prefetch" href="/assets/module-path-aliases.html.200ee7d2.js" as="script" /><link rel="prefetch" href="/assets/multi-zones.html.788a6b59.js" as="script" /><link rel="prefetch" href="/assets/output-file-tracing.html.3ae13a6f.js" as="script" /><link rel="prefetch" href="/assets/preview-mode.html.a37cd9cb.js" as="script" /><link rel="prefetch" href="/assets/security-headers.html.7187c4a1.js" as="script" /><link rel="prefetch" href="/assets/source-maps.html.84b5a11a.js" as="script" /><link rel="prefetch" href="/assets/src-directory.html.3ca15b28.js" as="script" /><link rel="prefetch" href="/assets/static-html-export.html.6a7081a8.js" as="script" /><link rel="prefetch" href="/assets/turbopack.html.97e20cec.js" as="script" /><link rel="prefetch" href="/assets/using-mdx.html.8e7f6ac5.js" as="script" /><link rel="prefetch" href="/assets/dynamic-api-routes.html.0da791ca.js" as="script" /><link rel="prefetch" href="/assets/edge-api-routes.html.c1b71287.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.832680e1.js" as="script" /><link rel="prefetch" href="/assets/request-helpers.html.d44765a4.js" as="script" /><link rel="prefetch" href="/assets/response-helpers.html.4011386e.js" as="script" /><link rel="prefetch" href="/assets/built-in-css-support.html.78d7dde1.js" as="script" /><link rel="prefetch" href="/assets/environment-variables.html.43cc5e0b.js" as="script" /><link rel="prefetch" href="/assets/eslint.html.bcf0fcc6.js" as="script" /><link rel="prefetch" href="/assets/fast-refresh.html.cd2ae8e1.js" as="script" /><link rel="prefetch" href="/assets/font-optimization.html.89b772e5.js" as="script" /><link rel="prefetch" href="/assets/image-optimization.html.a7059028.js" as="script" /><link rel="prefetch" href="/assets/layouts.html.cc60471e.js" as="script" /><link rel="prefetch" href="/assets/pages.html.0da4a57d.js" as="script" /><link rel="prefetch" href="/assets/script.html.c5654d05.js" as="script" /><link rel="prefetch" href="/assets/static-file-serving.html.6847dc43.js" as="script" /><link rel="prefetch" href="/assets/supported-browsers-features.html.8473edcc.js" as="script" /><link rel="prefetch" href="/assets/typescript.html.14fcad44.js" as="script" /><link rel="prefetch" href="/assets/building-forms.html.a3b9ca4e.js" as="script" /><link rel="prefetch" href="/assets/from-create-react-app.html.3e655f7d.js" as="script" /><link rel="prefetch" href="/assets/from-gatsby.html.b8da72b0.js" as="script" /><link rel="prefetch" href="/assets/from-react-router.html.912b7f21.js" as="script" /><link rel="prefetch" href="/assets/incremental-adoption.html.ac103cf1.js" as="script" /><link rel="prefetch" href="/assets/dynamic-routes.html.5405dbb6.js" as="script" /><link rel="prefetch" href="/assets/imperatively.html.6cda955b.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.7cdf1791.js" as="script" /><link rel="prefetch" href="/assets/shallow-routing.html.7e5ba127.js" as="script" /><link rel="prefetch" href="/assets/image.html.edb67770.js" as="script" /><link rel="prefetch" href="/assets/adding-amp-components.html.77f3f773.js" as="script" /><link rel="prefetch" href="/assets/amp-in-static-html-export.html.91611241.js" as="script" /><link rel="prefetch" href="/assets/amp-validation.html.287799e6.js" as="script" /><link rel="prefetch" href="/assets/introduction.html.de84dd31.js" as="script" /><link rel="prefetch" href="/assets/typescript.html.909343fd.js" as="script" /><link rel="prefetch" href="/assets/overview.html.598682ad.js" as="script" /><link rel="prefetch" href="/assets/server-components.html.a10e9051.js" as="script" /><link rel="prefetch" href="/assets/streaming.html.5f9a7b6b.js" as="script" /><link rel="prefetch" href="/assets/switchable-runtime.html.a8dbdb8e.js" as="script" /><link rel="prefetch" href="/assets/client-side.html.463acfb5.js" as="script" /><link rel="prefetch" href="/assets/get-server-side-props.html.da09272d.js" as="script" /><link rel="prefetch" href="/assets/get-static-paths.html.2e8e6b4e.js" as="script" /><link rel="prefetch" href="/assets/get-static-props.html.3533ce2d.js" as="script" /><link rel="prefetch" href="/assets/incremental-static-regeneration.html.98f53417.js" as="script" /><link rel="prefetch" href="/assets/overview.html.20652d8a.js" as="script" /><link rel="prefetch" href="/assets/404.html.eddfa4ff.js" as="script" /><link rel="prefetch" href="/assets/giscus.0979ea65.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="https://www.nextjs.cn/static/images/nextjs-logo.png" alt><!--v-if--></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/guide/getting-started" class="router-link-active" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/api-reference/cli" class="" aria-label="API 参考"><!--[--><!--]--> API 参考 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换主题颜色"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/guide/getting-started" class="router-link-active" aria-label="指南"><!--[--><!--]--> 指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/api-reference/cli" class="" aria-label="API 参考"><!--[--><!--]--> API 参考 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/guide/getting-started" class="sidebar-item sidebar-heading" aria-label="快速入门"><!--[--><!--]--> 快速入门 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">基本功能 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/basic-features/pages" class="sidebar-item" aria-label="页面"><!--[--><!--]--> 页面 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item">数据获取 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/basic-features/data-fetching/overview" class="sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/data-fetching/get-server-side-props" class="sidebar-item" aria-label="getServerSideProps"><!--[--><!--]--> getServerSideProps <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/data-fetching/get-static-paths" class="sidebar-item" aria-label="getStaticPaths"><!--[--><!--]--> getStaticPaths <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/data-fetching/get-static-props" class="sidebar-item" aria-label="getStaticProps"><!--[--><!--]--> getStaticProps <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/data-fetching/incremental-static-regeneration" class="sidebar-item" aria-label="ISR"><!--[--><!--]--> ISR <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/data-fetching/client-side" class="sidebar-item" aria-label="客户端"><!--[--><!--]--> 客户端 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/guide/basic-features/built-in-css-support" class="sidebar-item" aria-label="内置 CSS 支持"><!--[--><!--]--> 内置 CSS 支持 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/layouts" class="sidebar-item" aria-label="布局"><!--[--><!--]--> 布局 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/image-optimization" class="sidebar-item" aria-label="图像优化"><!--[--><!--]--> 图像优化 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/font-optimization" class="sidebar-item" aria-label="字体优化"><!--[--><!--]--> 字体优化 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/static-file-serving" class="sidebar-item" aria-label="静态文件服务"><!--[--><!--]--> 静态文件服务 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/fast-refresh" class="sidebar-item" aria-label="快速刷新"><!--[--><!--]--> 快速刷新 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/eslint" class="sidebar-item" aria-label="ESLint"><!--[--><!--]--> ESLint <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/typescript" class="sidebar-item" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/environment-variables" class="sidebar-item" aria-label="环境变量"><!--[--><!--]--> 环境变量 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/supported-browsers-features" class="sidebar-item" aria-label="支持的浏览器和功能"><!--[--><!--]--> 支持的浏览器和功能 <!--[--><!--]--></a><!----></li><li><a href="/guide/basic-features/script" class="sidebar-item" aria-label="处理脚本"><!--[--><!--]--> 处理脚本 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">路由 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/routing/introduction" class="sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a href="/guide/routing/dynamic-routes" class="sidebar-item" aria-label="动态路由"><!--[--><!--]--> 动态路由 <!--[--><!--]--></a><!----></li><li><a href="/guide/routing/imperatively" class="sidebar-item" aria-label="Imperatively"><!--[--><!--]--> Imperatively <!--[--><!--]--></a><!----></li><li><a href="/guide/routing/shallow-routing" class="sidebar-item" aria-label="浅路由"><!--[--><!--]--> 浅路由 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">API 路由 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/api-routes/introduction" class="sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a href="/guide/api-routes/dynamic-api-routes" class="sidebar-item" aria-label="动态API路由"><!--[--><!--]--> 动态API路由 <!--[--><!--]--></a><!----></li><li><a href="/guide/api-routes/request-helpers" class="sidebar-item" aria-label="请求助手"><!--[--><!--]--> 请求助手 <!--[--><!--]--></a><!----></li><li><a href="/guide/api-routes/response-helpers" class="sidebar-item" aria-label="响应助手"><!--[--><!--]--> 响应助手 <!--[--><!--]--></a><!----></li><li><a href="/guide/api-routes/edge-api-routes" class="sidebar-item" aria-label="Edge API 路由（测试版）"><!--[--><!--]--> Edge API 路由（测试版） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/guide/going-to-production" class="sidebar-item sidebar-heading" aria-label="生产环境"><!--[--><!--]--> 生产环境 <!--[--><!--]--></a><!----></li><li><a href="/guide/deployment" class="sidebar-item sidebar-heading" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><li><a href="/guide/authentication" class="sidebar-item sidebar-heading" aria-label="认证"><!--[--><!--]--> 认证 <!--[--><!--]--></a><!----></li><li><a href="/guide/testing" class="sidebar-item sidebar-heading" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a><!----></li><li><a href="/guide/accessibility" class="sidebar-item sidebar-heading" aria-label="可访问性"><!--[--><!--]--> 可访问性 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">指南 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/guides/building-forms" class="sidebar-item" aria-label="构建表单"><!--[--><!--]--> 构建表单 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">高级功能 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/advanced-features/compiler" class="sidebar-item" aria-label="Next.js Compiler"><!--[--><!--]--> Next.js Compiler <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/turbopack" class="sidebar-item" aria-label="Turbopack"><!--[--><!--]--> Turbopack <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/preview-mode" class="sidebar-item" aria-label="预览模式"><!--[--><!--]--> 预览模式 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/dynamic-import" class="sidebar-item" aria-label="动态导入"><!--[--><!--]--> 动态导入 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/automatic-static-optimization" class="sidebar-item" aria-label="自动静态优化"><!--[--><!--]--> 自动静态优化 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/static-html-export" class="sidebar-item" aria-label="静态 HTML 导出"><!--[--><!--]--> 静态 HTML 导出 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/module-path-aliases" class="sidebar-item" aria-label="绝对路径导入和模块路径别名"><!--[--><!--]--> 绝对路径导入和模块路径别名 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/using-mdx" class="sidebar-item" aria-label="使用 MDX"><!--[--><!--]--> 使用 MDX <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item">AMP 支持 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/advanced-features/amp-support/introduction" class="sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/amp-support/adding-amp-components" class="sidebar-item" aria-label="添加 AMP 组件"><!--[--><!--]--> 添加 AMP 组件 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/amp-support/amp-validation" class="sidebar-item" aria-label="AMP 验证"><!--[--><!--]--> AMP 验证 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/amp-support/amp-in-static-html-export" class="sidebar-item" aria-label="静态 HTML 导出中的 AMP"><!--[--><!--]--> 静态 HTML 导出中的 AMP <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/amp-support/typescript" class="sidebar-item" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/guide/advanced-features/customizing-babel-config" class="sidebar-item" aria-label="自定义 Babel 配置"><!--[--><!--]--> 自定义 Babel 配置 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/customizing-postcss-config" class="sidebar-item" aria-label="自定义 PostCSS 配置"><!--[--><!--]--> 自定义 PostCSS 配置 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/custom-server" class="sidebar-item" aria-label="自定义服务器"><!--[--><!--]--> 自定义服务器 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/custom-app" class="sidebar-item" aria-label="自定义`应用`"><!--[--><!--]--> 自定义`应用` <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/custom-document" class="sidebar-item" aria-label="自定义`文档`"><!--[--><!--]--> 自定义`文档` <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/custom-error-page" class="sidebar-item" aria-label="自定义错误页面"><!--[--><!--]--> 自定义错误页面 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/src-directory" class="sidebar-item" aria-label="`src` 目录"><!--[--><!--]--> `src` 目录 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/ci-build-caching" class="sidebar-item" aria-label="CI 构建缓存"><!--[--><!--]--> CI 构建缓存 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/multi-zones" class="sidebar-item" aria-label="多地区"><!--[--><!--]--> 多地区 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/measuring-performance" class="sidebar-item" aria-label="性能测试"><!--[--><!--]--> 性能测试 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/middleware" class="sidebar-item" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/debugging" class="sidebar-item" aria-label="调试"><!--[--><!--]--> 调试 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/error-handling" class="sidebar-item" aria-label="错误处理"><!--[--><!--]--> 错误处理 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/source-maps" class="sidebar-item" aria-label="Source Maps"><!--[--><!--]--> Source Maps <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/codemods" class="sidebar-item" aria-label="Codemods"><!--[--><!--]--> Codemods <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/i18n-routing" class="sidebar-item" aria-label="国际化路由"><!--[--><!--]--> 国际化路由 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/output-file-tracing" class="sidebar-item" aria-label="输出文件跟踪"><!--[--><!--]--> 输出文件跟踪 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/security-headers" class="sidebar-item" aria-label="安全标头"><!--[--><!--]--> 安全标头 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item">React 18 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/advanced-features/react-18/overview" class="sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/react-18/streaming" class="sidebar-item" aria-label="流式SSR"><!--[--><!--]--> 流式SSR <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/react-18/server-components" class="sidebar-item" aria-label="React服务器组件"><!--[--><!--]--> React服务器组件 <!--[--><!--]--></a><!----></li><li><a href="/guide/advanced-features/react-18/switchable-runtime" class="sidebar-item" aria-label="可切换运行时"><!--[--><!--]--> 可切换运行时 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/guide/upgrading" class="router-link-active sidebar-item sidebar-heading active" aria-label="升级指南"><!--[--><!--]--> 升级指南 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">迁移到 Next.js <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/guide/migrating/incremental-adoption" class="sidebar-item" aria-label="逐步采用 Next.js"><!--[--><!--]--> 逐步采用 Next.js <!--[--><!--]--></a><!----></li><li><a href="/guide/migrating/from-gatsby" class="sidebar-item" aria-label="从Gatsby迁移"><!--[--><!--]--> 从Gatsby迁移 <!--[--><!--]--></a><!----></li><li><a href="/guide/migrating/from-create-react-app" class="sidebar-item" aria-label="从 Create React App 迁移"><!--[--><!--]--> 从 Create React App 迁移 <!--[--><!--]--></a><!----></li><li><a href="/guide/migrating/from-react-router" class="sidebar-item" aria-label="从 React Router迁移"><!--[--><!--]--> 从 React Router迁移 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/guide/faq" class="sidebar-item sidebar-heading" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="upgrade-guide" tabindex="-1"><a class="header-anchor" href="#upgrade-guide" aria-hidden="true">#</a> Upgrade Guide</h1><h2 id="upgrading-from-12-to-13" tabindex="-1"><a class="header-anchor" href="#upgrading-from-12-to-13" aria-hidden="true">#</a> Upgrading from 12 to 13</h2><p>To update to Next.js version 13, run the following command using your preferred package manager:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i next@latest react@latest react-dom@latest eslint-config-next@latest
<span class="token comment"># or</span>
<span class="token function">yarn</span> upgrade next react react-dom eslint-config-next <span class="token parameter variable">--latest</span>
<span class="token comment"># or</span>
<span class="token function">pnpm</span> up next react react-dom eslint-config-next <span class="token parameter variable">--latest</span>

</code></pre></div><h3 id="v13-summary" tabindex="-1"><a class="header-anchor" href="#v13-summary" aria-hidden="true">#</a> v13 Summary</h3><ul><li>The<a href="/docs/guide/basic-features/supported-browsers-features">Supported Browsers</a>have been changed to drop Internet Explorer and target modern browsers.- The minimum Node.js version has been bumped from 12.22.0 to 14.0.0, since 12.x has reached end-of-life.- The minimum React version has been bumped from 17.0.2 to 18.2.0.- The<code>swcMinify</code>configuration property was changed from<code>false</code>to<code>true</code>. See<a href="/docs/guide/advanced-features/compiler">Next.js Compiler</a>for more info.- The<code>next/image</code>import was renamed to<code>next/legacy/image</code>. The<code>next/future/image</code>import was renamed to<code>next/image</code>. A<a href="/docs/guide/advanced-features/codemods#next-image-to-legacy-image">codemod is available</a>to safely and automatically rename your imports.- The<code>next/link</code>child can no longer be<code>&lt;a&gt;</code>. Add the<code>legacyBehavior</code>prop to use the legacy behavior or remove the<code>&lt;a&gt;</code>to upgrade. A<a href="/docs/guide/advanced-features/codemods#new-link">codemod is available</a>to automatically upgrade your code.- The<code>target</code>configuration property has been removed and superseded by<a href="/docs/guide/advanced-features/output-file-tracing">Output File Tracing</a>.</li></ul><h2 id="migrating-shared-features" tabindex="-1"><a class="header-anchor" href="#migrating-shared-features" aria-hidden="true">#</a> Migrating shared features</h2><p>Next.js 13 introduces a new<a href="https://beta.nextjs.org/docs/routing/fundamentals" target="_blank" rel="noopener noreferrer"><code>app</code>directory<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>with new features and conventions. However, upgrading to Next.js 13 does<strong>not</strong>require using the new<a href="https://beta.nextjs.org/docs/routing/fundamentals#the-app-directory" target="_blank" rel="noopener noreferrer"><code>app</code>directory<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>You can continue using<code>pages</code>with new features that work in both directories, such as the updated<a href="#image-component">Image component</a>,<a href="#link-component">Link component</a>,<a href="#script-component">Script component</a>, and<a href="#font-optimization">Font optimization</a>.</p><h3 id="image-component" tabindex="-1"><a class="header-anchor" href="#image-component" aria-hidden="true">#</a> <code>&lt;Image/&gt;</code> Component</h3><p>Next.js 12 introduced many improvements to the Image Component with a temporary import:<code>next/future/image</code>. These improvements included less client-side JavaScript, easier ways to extend and style images, better accessibility, and native browser lazy loading.</p><p>Starting in Next.js 13, this new behavior is now the default for<code>next/image</code>.</p><p>There are two codemods to help you migrate to the new Image Component:</p><ul><li><a href="/docs/guide/advanced-features/codemods#rename-instances-of-nextimage">next-image-to-legacy-image</a>: This codemod will safely and automatically rename<code>next/image</code>imports to<code>next/legacy/image</code>to maintain the same behavior as Next.js 12. We recommend running this codemod to quickly update to Next.js 13 automatically.- <a href="/docs/guide/advanced-features/codemods#next-image-experimental-experimental">next-image-experimental</a>: After running the previous codemod, you can optionally run this experimental codemod to upgrade<code>next/legacy/image</code>to the new<code>next/image</code>, which will remove unused props and add inline styles. Please note this codemod is experimental and only covers static usage (such as<code>&lt;Image src={img} layout=&quot;responsive&quot; /&gt;</code>) but not dynamic usage (such as<code>&lt;Image {...props} /&gt;</code>).</li></ul><p>Alternatively, you can manually update by following the<a href="/docs/guide/advanced-features/codemods#next-image-experimental-experimental">migration guide</a>and also see the<a href="/docs/guide/api-reference/next/legacy/image#comparison">legacy comparison</a>.</p><h3 id="link-component" tabindex="-1"><a class="header-anchor" href="#link-component" aria-hidden="true">#</a> <code>&lt;Link&gt;</code> Component</h3><p>The<a href="/docs/guide/api-reference/next/link"><code>&lt;Link&gt;</code>Component</a>no longer requires manually adding an<code>&lt;a&gt;</code>tag as a child. This behavior was added as an experimental option in<a href="/blog/next-12-2">version 12.2</a>and is now the default. In Next.js 13,<code>&lt;Link&gt;</code>always renders<code>&lt;a&gt;</code>and allows you to forward props to the underlying tag.</p><p>For example:</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#39;next/link&#39;</span>

<span class="token comment">// Next.js 12: `&lt;a&gt;` has to be nested otherwise it&#39;s excluded</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// Next.js 13: `&lt;Link&gt;` always renders `&lt;a&gt;` under the hood</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  About
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>To upgrade your links to Next.js 13, you can use the<a href="/docs/guide/advanced-features/codemods#new-link"><code>new-link</code>codemod</a>.</p><h3 id="script-component" tabindex="-1"><a class="header-anchor" href="#script-component" aria-hidden="true">#</a> <code>&lt;Script&gt;</code> Component</h3><p>The behavior of<a href="/docs/guide/api-reference/next/script"><code>next/script</code></a>has been updated to support both<code>pages</code>and<code>app</code>. If incrementally adopting<code>app</code>, read the<a href="https://beta.nextjs.org/docs/upgrade-guide" target="_blank" rel="noopener noreferrer">upgrade guide<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h3 id="font-optimization" tabindex="-1"><a class="header-anchor" href="#font-optimization" aria-hidden="true">#</a> Font Optimization</h3><p>Previously, Next.js helped you optimize fonts by inlining font CSS. Version 13 introduces the new<a href="/docs/guide/basic-features/font-optimization"><code>next/font</code></a>module which gives you the ability to customize your font loading experience while still ensuring great performance and privacy.</p><p>See<a href="/docs/guide/basic-features/font-optimization">Optimizing Fonts</a>to learn how to use<code>next/font</code>.</p><h2 id="upgrading-to-12-2" tabindex="-1"><a class="header-anchor" href="#upgrading-to-12-2" aria-hidden="true">#</a> Upgrading to 12.2</h2><p>If you were using Middleware prior to<code>12.2</code>, please see the<a href="/docs/messages/middleware-upgrade-guide">upgrade guide</a>for more information.</p><h2 id="upgrading-from-11-to-12" tabindex="-1"><a class="header-anchor" href="#upgrading-from-11-to-12" aria-hidden="true">#</a> Upgrading from 11 to 12</h2><h3 id="minimum-node-js-version" tabindex="-1"><a class="header-anchor" href="#minimum-node-js-version" aria-hidden="true">#</a> Minimum Node.js version</h3><p>The minimum Node.js version has been bumped from 12.0.0 to 12.22.0 which is the first version of Node.js with native ES Modules support.</p><h3 id="upgrade-react-version-to-latest" tabindex="-1"><a class="header-anchor" href="#upgrade-react-version-to-latest" aria-hidden="true">#</a> Upgrade React version to latest</h3><p>The minimum required React version is<code>17.0.2</code>. To upgrade you can run the following command in the terminal:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>npm install react@latest react-dom@latest

</code></pre></div><p>Or using<code>yarn</code>:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>yarn add react@latest react-dom@latest

</code></pre></div><h3 id="upgrade-next-js-version-to-12" tabindex="-1"><a class="header-anchor" href="#upgrade-next-js-version-to-12" aria-hidden="true">#</a> Upgrade Next.js version to 12</h3><p>To upgrade you can run the following command in the terminal:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>npm install next@12

</code></pre></div><p>or</p><div class="language-text" data-ext="text"><pre class="language-text"><code>yarn add next@12

</code></pre></div><h3 id="swc-replacing-babel" tabindex="-1"><a class="header-anchor" href="#swc-replacing-babel" aria-hidden="true">#</a> SWC replacing Babel</h3><p>Next.js now uses a Rust-based compiler,<a href="https://swc.rs/" target="_blank" rel="noopener noreferrer">SWC<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, to compile JavaScript/TypeScript. This new compiler is up to 17x faster than Babel when compiling individual files and allows for up to 5x faster Fast Refresh.</p><p>Next.js provides full backwards compatibility with applications that have<a href="/docs/guide/advanced-features/customizing-babel-config">custom Babel configuration</a>. All transformations that Next.js handles by default like styled-jsx and tree-shaking of<code>getStaticProps</code>/<code>getStaticPaths</code>/<code>getServerSideProps</code>have been ported to Rust.</p><p>When an application has a custom Babel configuration, Next.js will automatically opt-out of using SWC for compiling JavaScript/Typescript and will fall back to using Babel in the same way that it was used in Next.js 11.</p><p>Many of the integrations with external libraries that currently require custom Babel transformations will be ported to Rust-based SWC transforms in the near future. These include but are not limited to:</p><ul><li>Styled Components- Emotion- Relay</li></ul><p>In order to prioritize transforms that will help you adopt SWC, please provide your<code>.babelrc</code>on<a href="https://github.com/vercel/next.js/discussions/30174" target="_blank" rel="noopener noreferrer">the feedback thread<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h3 id="swc-replacing-terser-for-minification" tabindex="-1"><a class="header-anchor" href="#swc-replacing-terser-for-minification" aria-hidden="true">#</a> SWC replacing Terser for minification</h3><p>You can opt-in to replacing Terser with SWC for minifying JavaScript up to 7x faster using a flag in<code>next.config.js</code>:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">swcMinify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Minification using SWC is an opt-in flag to ensure it can be tested against more real-world Next.js applications before it becomes the default in Next.js 12.1. If you have feedback about minification, please leave it on<a href="https://github.com/vercel/next.js/discussions/30237" target="_blank" rel="noopener noreferrer">the feedback thread<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h3 id="improvements-to-styled-jsx-css-parsing" tabindex="-1"><a class="header-anchor" href="#improvements-to-styled-jsx-css-parsing" aria-hidden="true">#</a> Improvements to styled-jsx CSS parsing</h3><p>On top of the Rust-based compiler, we&#39;ve implemented a new CSS parser based on the CSS parser that was used for the styled-jsx Babel transform. This new parser has improved handling of CSS and now errors when invalid CSS is used that would previously slip through and cause unexpected behavior.</p><p>Because of this change, invalid CSS will throw an error during development and<code>next build</code>. This change only affects styled-jsx usage.</p><h3 id="next-image-changed-wrapping-element" tabindex="-1"><a class="header-anchor" href="#next-image-changed-wrapping-element" aria-hidden="true">#</a> next/image changed wrapping element</h3><p><code>next/image</code>now renders the<code>&lt;img&gt;</code>inside a<code>&lt;span&gt;</code>instead of<code>&lt;div&gt;</code>.</p><p>If your application has specific CSS targeting span, for example,<code>.container span</code>, upgrading to Next.js 12 might incorrectly match the wrapping element inside the<code>&lt;Image&gt;</code>component. You can avoid this by restricting the selector to a specific class such as<code>.container span.item</code>and updating the relevant component with that className, such as<code>&lt;span className=&quot;item&quot; /&gt;</code>.</p><p>If your application has specific CSS targeting the<code>next/image``&lt;div&gt;</code>tag, for example<code>.container div</code>, it may not match anymore. You can update the selector<code>.container span</code>, or preferably, add a new<code>&lt;div className=&quot;wrapper&quot;&gt;</code>wrapping the<code>&lt;Image&gt;</code>component and target that instead such as<code>.container .wrapper</code>.</p><p>The<code>className</code>prop is unchanged and will still be passed to the underlying<code>&lt;img&gt;</code>element.</p><p>See the<a href="/docs/guide/basic-features/image-optimization#styling">documentation</a>for more info.</p><h3 id="next-js-hmr-connection-now-uses-a-websocket" tabindex="-1"><a class="header-anchor" href="#next-js-hmr-connection-now-uses-a-websocket" aria-hidden="true">#</a> Next.js&#39; HMR connection now uses a WebSocket</h3><p>Previously, Next.js used a<a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events" target="_blank" rel="noopener noreferrer">server-sent events<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>connection to receive HMR events. Next.js 12 now uses a WebSocket connection.</p><p>In some cases when proxying requests to the Next.js dev server, you will need to ensure the upgrade request is handled correctly. For example, in<code>nginx</code>you would need to add the following configuration:</p><div class="language-nginx" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /_next/webpack-hmr</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://localhost:3000/_next/webpack-hmr</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection <span class="token string">&quot;upgrade&quot;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>For custom servers, such as<code>express</code>, you may need to use<code>app.all</code>to ensure the request is passed correctly, for example:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/_next/webpack-hmr&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">nextjsRequestHandler</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="webpack-4-support-has-been-removed" tabindex="-1"><a class="header-anchor" href="#webpack-4-support-has-been-removed" aria-hidden="true">#</a> Webpack 4 support has been removed</h3><p>If you are already using webpack 5 you can skip this section.</p><p>Next.js has adopted webpack 5 as the default for compilation in Next.js 11. As communicated in the<a href="/docs/messages/webpack5">webpack 5 upgrading documentation</a>Next.js 12 removes support for webpack 4.</p><p>If your application is still using webpack 4 using the opt-out flag you will now see an error linking to the<a href="/docs/messages/webpack5">webpack 5 upgrading documentation</a>.</p><h3 id="target-option-deprecated" tabindex="-1"><a class="header-anchor" href="#target-option-deprecated" aria-hidden="true">#</a> target option deprecated</h3><p>If you do not have<code>target</code>in<code>next.config.js</code>you can skip this section.</p><p>The target option has been deprecated in favor of built-in support for tracing what dependencies are needed to run a page.</p><p>During<code>next build</code>, Next.js will automatically trace each page and its dependencies to determine all of the files that are needed for deploying a production version of your application.</p><p>If you are currently using the<code>target</code>option set to<code>serverless</code>please read the<a href="/docs/guide/advanced-features/output-file-tracing">documentation on how to leverage the new output</a>.</p><h2 id="upgrading-from-version-10-to-11" tabindex="-1"><a class="header-anchor" href="#upgrading-from-version-10-to-11" aria-hidden="true">#</a> Upgrading from version 10 to 11</h2><h3 id="upgrade-react-version-to-latest-1" tabindex="-1"><a class="header-anchor" href="#upgrade-react-version-to-latest-1" aria-hidden="true">#</a> Upgrade React version to latest</h3><p>Most applications already use the latest version of React, with Next.js 11 the minimum React version has been updated to 17.0.2.</p><p>To upgrade you can run the following command:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>npm install react@latest react-dom@latest

</code></pre></div><p>Or using<code>yarn</code>:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>yarn add react@latest react-dom@latest

</code></pre></div><h3 id="upgrade-next-js-version-to-11" tabindex="-1"><a class="header-anchor" href="#upgrade-next-js-version-to-11" aria-hidden="true">#</a> Upgrade Next.js version to 11</h3><p>To upgrade you can run the following command in the terminal:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>npm install next@11

</code></pre></div><p>or</p><div class="language-text" data-ext="text"><pre class="language-text"><code>yarn add next@11

</code></pre></div><h3 id="webpack-5" tabindex="-1"><a class="header-anchor" href="#webpack-5" aria-hidden="true">#</a> Webpack 5</h3><p>Webpack 5 is now the default for all Next.js applications. If you did not have custom webpack configuration your application is already using webpack 5. If you do have custom webpack configuration you can refer to the<a href="/docs/messages/webpack5">Next.js webpack 5 documentation</a>for upgrading guidance.</p><h3 id="cleaning-the-distdir-is-now-a-default" tabindex="-1"><a class="header-anchor" href="#cleaning-the-distdir-is-now-a-default" aria-hidden="true">#</a> Cleaning the distDir is now a default</h3><p>The build output directory (defaults to<code>.next</code>) is now cleared by default except for the Next.js caches. You can refer to<a href="https://github.com/vercel/next.js/discussions/6009" target="_blank" rel="noopener noreferrer">the cleaning<code>distDir</code>RFC<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>for more information.</p><p>If your application was relying on this behavior previously you can disable the new default behavior by adding the<code>cleanDistDir: false</code>flag in<code>next.config.js</code>.</p><h3 id="port-is-now-supported-for-next-dev-and-next-start" tabindex="-1"><a class="header-anchor" href="#port-is-now-supported-for-next-dev-and-next-start" aria-hidden="true">#</a> PORT is now supported for next dev and next start</h3><p>Next.js 11 supports the<code>PORT</code>environment variable to set the port the application has to run on. Using<code>-p</code>/<code>--port</code>is still recommended but if you were prohibited from using<code>-p</code>in any way you can now use<code>PORT</code>as an alternative:</p><p>Example:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>PORT=4000 next start

</code></pre></div><h3 id="next-config-js-customization-to-import-images" tabindex="-1"><a class="header-anchor" href="#next-config-js-customization-to-import-images" aria-hidden="true">#</a> next.config.js customization to import images</h3><p>Next.js 11 supports static image imports with<code>next/image</code>. This new feature relies on being able to process image imports. If you previously added the<code>next-images</code>or<code>next-optimized-images</code>packages you can either move to the new built-in support using<code>next/image</code>or disable the feature:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">images</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">disableStaticImages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="remove-super-componentdidcatch-from-pages-app-js" tabindex="-1"><a class="header-anchor" href="#remove-super-componentdidcatch-from-pages-app-js" aria-hidden="true">#</a> Remove super.componentDidCatch() from pages/_app.js</h3><p>The<code>next/app</code>component&#39;s<code>componentDidCatch</code>has been deprecated since Next.js 9 as it&#39;s no longer needed and has since been a no-op, in Next.js 11 it has been removed.</p><p>If your<code>pages/_app.js</code>has a custom<code>componentDidCatch</code>method you can remove<code>super.componentDidCatch</code>as it is no longer needed.</p><h3 id="remove-container-from-pages-app-js" tabindex="-1"><a class="header-anchor" href="#remove-container-from-pages-app-js" aria-hidden="true">#</a> Remove Container from pages/_app.js</h3><p>This export has been deprecated since Next.js 9 as it&#39;s no longer needed and has since been a no-op with a warning during development. In Next.js 11 it has been removed.</p><p>If your<code>pages/_app.js</code>imports<code>Container</code>from<code>next/app</code>you can remove<code>Container</code>as it has been removed. Learn more in<a href="/docs/messages/app-container-deprecated">the documentation</a>.</p><h3 id="remove-props-url-usage-from-page-components" tabindex="-1"><a class="header-anchor" href="#remove-props-url-usage-from-page-components" aria-hidden="true">#</a> Remove props.url usage from page components</h3><p>This property has been deprecated since Next.js 4 and has since shown a warning during development. With the introduction of<code>getStaticProps</code>/<code>getServerSideProps</code>these methods already disallowed usage of<code>props.url</code>. In Next.js 11 it has been removed completely.</p><p>You can learn more in<a href="/docs/messages/url-deprecated">the documentation</a>.</p><h3 id="remove-unsized-property-on-next-image" tabindex="-1"><a class="header-anchor" href="#remove-unsized-property-on-next-image" aria-hidden="true">#</a> Remove unsized property on next/image</h3><p>The<code>unsized</code>property on<code>next/image</code>was deprecated in Next.js 10.0.1. You can use<code>layout=&quot;fill&quot;</code>instead. In Next.js 11<code>unsized</code>was removed.</p><h3 id="remove-modules-property-on-next-dynamic" tabindex="-1"><a class="header-anchor" href="#remove-modules-property-on-next-dynamic" aria-hidden="true">#</a> Remove modules property on next/dynamic</h3><p>The<code>modules</code>and<code>render</code>option for<code>next/dynamic</code>have been deprecated since Next.js 9.5 showing a warning that it has been deprecated. This was done in order to make<code>next/dynamic</code>close to<code>React.lazy</code>in API surface. In Next.js 11 the<code>modules</code>and<code>render</code>options have been removed.</p><p>This option hasn&#39;t been mentioned in the documentation since Next.js 8 so it&#39;s less likely that your application is using it.</p><p>If your application does use<code>modules</code>and<code>render</code>you can refer to<a href="/docs/messages/next-dynamic-modules">the documentation</a>.</p><h3 id="remove-head-rewind" tabindex="-1"><a class="header-anchor" href="#remove-head-rewind" aria-hidden="true">#</a> Remove Head.rewind</h3><p><code>Head.rewind</code>has been a no-op since Next.js 9.5, in Next.js 11 it was removed. You can safely remove your usage of<code>Head.rewind</code>.</p><h3 id="moment-js-locales-excluded-by-default" tabindex="-1"><a class="header-anchor" href="#moment-js-locales-excluded-by-default" aria-hidden="true">#</a> Moment.js locales excluded by default</h3><p>Moment.js includes translations for a lot of locales by default. Next.js now automatically excludes these locales by default to optimize bundle size for applications using Moment.js.</p><p>To load a specific locale use this snippet:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&#39;moment&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;moment/locale/ja&#39;</span>

moment<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">&#39;ja&#39;</span><span class="token punctuation">)</span>

</code></pre></div><p>You can opt-out of this new default by adding<code>excludeDefaultMomentLocales: false</code>to<code>next.config.js</code>if you do not want the new behavior, do note it&#39;s highly recommended to not disable this new optimization as it significantly reduces the size of Moment.js.</p><h3 id="update-usage-of-router-events" tabindex="-1"><a class="header-anchor" href="#update-usage-of-router-events" aria-hidden="true">#</a> Update usage of router.events</h3><p>In case you&#39;re accessing<code>router.events</code>during rendering, in Next.js 11<code>router.events</code>is no longer provided during pre-rendering. Ensure you&#39;re accessing<code>router.events</code>in<code>useEffect</code>:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleRouteChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> <span class="token punctuation">{</span> shallow <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">App is changing to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
        shallow <span class="token operator">?</span> <span class="token string">&#39;with&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;without&#39;</span>
      <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> shallow routing</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;routeChangeStart&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>

  <span class="token comment">// If the component is unmounted, unsubscribe</span>
  <span class="token comment">// from the event with the `off` method:</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;routeChangeStart&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>router<span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre></div><p>If your application uses<code>router.router.events</code>which was an internal property that was not public please make sure to use<code>router.events</code>as well.</p><h2 id="react-16-to-17" tabindex="-1"><a class="header-anchor" href="#react-16-to-17" aria-hidden="true">#</a> React 16 to 17</h2><p>React 17 introduced a new<a href="https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html" target="_blank" rel="noopener noreferrer">JSX Transform<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>that brings a long-time Next.js feature to the wider React ecosystem: Not having to<code>import React from &#39;react&#39;</code>when using JSX. When using React 17 Next.js will automatically use the new transform. This transform does not make the<code>React</code>variable global, which was an unintended side-effect of the previous Next.js implementation. A<a href="/docs/guide/advanced-features/codemods#add-missing-react-import">codemod is available</a>to automatically fix cases where you accidentally used<code>React</code>without importing it.</p><h2 id="upgrading-from-version-9-to-10" tabindex="-1"><a class="header-anchor" href="#upgrading-from-version-9-to-10" aria-hidden="true">#</a> Upgrading from version 9 to 10</h2><p>There were no breaking changes between version 9 and 10.</p><p>To upgrade run the following command:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>npm install next@10

</code></pre></div><p>Or using<code>yarn</code>:</p><div class="language-text" data-ext="text"><pre class="language-text"><code>yarn add next@10

</code></pre></div><h2 id="upgrading-from-version-8-to-9" tabindex="-1"><a class="header-anchor" href="#upgrading-from-version-8-to-9" aria-hidden="true">#</a> Upgrading from version 8 to 9</h2><h3 id="preamble" tabindex="-1"><a class="header-anchor" href="#preamble" aria-hidden="true">#</a> Preamble</h3><h4 id="production-deployment-on-vercel" tabindex="-1"><a class="header-anchor" href="#production-deployment-on-vercel" aria-hidden="true">#</a> Production Deployment on Vercel</h4><p>If you previously configured<code>routes</code>in your<code>vercel.json</code>file for dynamic routes, these rules can be removed when leveraging Next.js 9&#39;s new<a href="/docs/guide/routing/dynamic-routes">Dynamic Routing feature</a>.</p><p>Next.js 9&#39;s dynamic routes are**automatically configured on<a href="https://vercel.com?utm_source=next-site&amp;utm_medium=docs&amp;utm_campaign=next-website" target="_blank" rel="noopener noreferrer">Vercel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>**and do not require any<code>vercel.json</code>customization.</p><p>You can read more about<a href="/docs/guide/routing/dynamic-routes">Dynamic Routing here</a>.</p><h4 id="check-your-custom-pages-app-js" tabindex="-1"><a class="header-anchor" href="#check-your-custom-pages-app-js" aria-hidden="true">#</a> Check your Custom (pages/_app.js)</h4><p>If you previously copied the<a href="/docs/guide/advanced-features/custom-app">Custom<code>&lt;App&gt;</code></a>example, you may be able to remove your<code>getInitialProps</code>.</p><p>Removing<code>getInitialProps</code>from<code>pages/_app.js</code>(when possible) is important to leverage new Next.js features!</p><p>The following<code>getInitialProps</code>does nothing and may be removed:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
  <span class="token comment">// Remove me, I do nothing!</span>
  <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> Component<span class="token punctuation">,</span> ctx <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pageProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>Component<span class="token punctuation">.</span>getInitialProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pageProps <span class="token operator">=</span> <span class="token keyword">await</span> Component<span class="token punctuation">.</span><span class="token function">getInitialProps</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> pageProps <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... etc</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="breaking-changes" tabindex="-1"><a class="header-anchor" href="#breaking-changes" aria-hidden="true">#</a> Breaking Changes</h3><h4 id="zeit-next-typescript-is-no-longer-necessary" tabindex="-1"><a class="header-anchor" href="#zeit-next-typescript-is-no-longer-necessary" aria-hidden="true">#</a> @zeit/next-typescript is no longer necessary</h4><p>Next.js will now ignore usage<code>@zeit/next-typescript</code>and warn you to remove it. Please remove this plugin from your<code>next.config.js</code>.</p><p>Remove references to<code>@zeit/next-typescript/babel</code>from your custom<code>.babelrc</code>(if present).</p><p>Usage of<a href="https://github.com/Realytics/fork-ts-checker-webpack-plugin/issues" target="_blank" rel="noopener noreferrer"><code>fork-ts-checker-webpack-plugin</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>should also be removed from your<code>next.config.js</code>.</p><p>TypeScript Definitions are published with the<code>next</code>package, so you need to uninstall<code>@types/next</code>as they would conflict.</p><p>The following types are different:</p><blockquote><p>This list was created by the community to help you upgrade, if you find other differences please send a pull request to this list to help other users.</p></blockquote><p>From:</p><div class="language-tsx" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NextContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NextAppContext<span class="token punctuation">,</span> DefaultAppIProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/app&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NextDocumentContext<span class="token punctuation">,</span> DefaultDocumentIProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/document&#39;</span>

</code></pre></div><p>to</p><div class="language-tsx" data-ext="tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NextPageContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppContext<span class="token punctuation">,</span> AppInitialProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/app&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DocumentContext<span class="token punctuation">,</span> DocumentInitialProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/document&#39;</span>

</code></pre></div><h4 id="the-config-key-is-now-a-named-export-on-a-page" tabindex="-1"><a class="header-anchor" href="#the-config-key-is-now-a-named-export-on-a-page" aria-hidden="true">#</a> The config key is now a named export on a page</h4><p>You may no longer export a custom variable named<code>config</code>from a page (i.e.<code>export { config }</code>/<code>export const config ...</code>). This exported variable is now used to specify page-level Next.js configuration like Opt-in AMP and API Route features.</p><p>You must rename a non-Next.js-purposed<code>config</code>export to something different.</p><h4 id="next-dynamic-no-longer-renders-loading-by-default-while-loading" tabindex="-1"><a class="header-anchor" href="#next-dynamic-no-longer-renders-loading-by-default-while-loading" aria-hidden="true">#</a> next/dynamic no longer renders &quot;loading...&quot; by default while loading</h4><p>Dynamic components will not render anything by default while loading. You can still customize this behavior by setting the<code>loading</code>property:</p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&#39;next/dynamic&#39;</span>

<span class="token keyword">const</span> DynamicComponentWithCustomLoading <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../components/hello2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">loading</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

</code></pre></div><h4 id="withamp-has-been-removed-in-favor-of-an-exported-configuration-object" tabindex="-1"><a class="header-anchor" href="#withamp-has-been-removed-in-favor-of-an-exported-configuration-object" aria-hidden="true">#</a> withAmp has been removed in favor of an exported configuration object</h4><p>Next.js now has the concept of page-level configuration, so the<code>withAmp</code>higher-order component has been removed for consistency.</p><p>This change can be<strong>automatically migrated by running the following commands at the root of your Next.js project:</strong></p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-L</span> https://github.com/vercel/next-codemod/archive/master.tar.gz <span class="token operator">|</span> <span class="token function">tar</span> <span class="token parameter variable">-xz</span> <span class="token parameter variable">--strip</span><span class="token operator">=</span><span class="token number">2</span> next-codemod-master/transforms/withamp-to-config.js npx jscodeshift <span class="token parameter variable">-t</span> ./withamp-to-config.js pages/**/*.js

</code></pre></div><p>To perform this migration by hand, or view what the codemod will produce, see below:</p><p><strong>Before</strong></p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> withAmp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/amp&#39;</span>

<span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">My AMP Page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withAmp</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span>
<span class="token comment">// or</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withAmp</span><span class="token punctuation">(</span>Home<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">hybrid</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p><strong>After</strong></p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">My AMP Page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">amp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// or</span>
  <span class="token literal-property property">amp</span><span class="token operator">:</span> <span class="token string">&#39;hybrid&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="next-export-no-longer-exports-pages-as-index-html" tabindex="-1"><a class="header-anchor" href="#next-export-no-longer-exports-pages-as-index-html" aria-hidden="true">#</a> next export no longer exports pages as index.html</h4><p>Previously, exporting<code>pages/about.js</code>would result in<code>out/about/index.html</code>. This behavior has been changed to result in<code>out/about.html</code>.</p><p>You can revert to the previous behavior by creating a<code>next.config.js</code>with the following content:</p><div class="language-javascript" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// next.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">trailingSlash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="pages-api-is-treated-differently" tabindex="-1"><a class="header-anchor" href="#pages-api-is-treated-differently" aria-hidden="true">#</a> ./pages/api/ is treated differently</h4><p>Pages in<code>./pages/api/</code>are now considered<a href="/blog/next-9#api-routes">API Routes</a>. Pages in this directory will no longer contain a client-side bundle.</p><h2 id="deprecated-features" tabindex="-1"><a class="header-anchor" href="#deprecated-features" aria-hidden="true">#</a> Deprecated Features</h2><h4 id="next-dynamic-has-deprecated-loading-multiple-modules-at-once" tabindex="-1"><a class="header-anchor" href="#next-dynamic-has-deprecated-loading-multiple-modules-at-once" aria-hidden="true">#</a> next/dynamic has deprecated loading multiple modules at once</h4><p>The ability to load multiple modules at once has been deprecated in<code>next/dynamic</code>to be closer to React&#39;s implementation (<code>React.lazy</code>and<code>Suspense</code>).</p><p>Updating code that relies on this behavior is relatively straightforward! We&#39;ve provided an example of a before/after to help you migrate your application:</p><p><strong>Before</strong></p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&#39;next/dynamic&#39;</span>

<span class="token keyword">const</span> HelloBundle <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">modules</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> components <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">Hello1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../components/hello1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function-variable function">Hello2</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../components/hello2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> components
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token punctuation">{</span> Hello1<span class="token punctuation">,</span> Hello2 <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello1</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello2</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">DynamicBundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloBundle</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Dynamic Bundle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> DynamicBundle

</code></pre></div><p><strong>After</strong></p><div class="language-jsx" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">&#39;next/dynamic&#39;</span>

<span class="token keyword">const</span> Hello1 <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../components/hello1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Hello2 <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;../components/hello2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">HelloBundle</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello1</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hello2</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">DynamicBundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HelloBundle</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Dynamic Bundle<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> DynamicBundle

</code></pre></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><!----><!--[--><!--[--><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.1ad2624e.js" defer></script>
  </body>
</html>
